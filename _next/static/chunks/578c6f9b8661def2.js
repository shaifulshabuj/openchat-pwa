(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25629,e=>{"use strict";let t;var r,n,a,o,i,s,l,d=e.i(3289),c=e.i(41263),u=e.i(47596),f=e.i(33804);let p=(0,f.default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),m=(0,f.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),h=(0,f.default)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),g=(0,f.default)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);var y=e.i(93441);let x=(0,f.default)("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),v=(0,f.default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),w=(0,f.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),b=(0,f.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var j=e.i(85349),k=e.i(85902),N=e.i(10012),E=e.i(5343),R=e.i(51052),C=e.i(94108);e.i(19256);let S=(0,f.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var M=e.i(74834);function P({onFileUploaded:e,onClose:t,maxSize:r=10,allowedTypes:n=["image/jpeg","image/png","image/gif","image/webp","application/pdf","text/plain","audio/mpeg","audio/wav","video/mp4","video/webm"]}){let[a,o]=(0,c.useState)(!1),[i,s]=(0,c.useState)(!1),[l,u]=(0,c.useState)(null),[f,p]=(0,c.useState)(0),m=(0,c.useRef)(null),h=e=>{u(null);let t=1024*r*1024;e.size>t?u(`File too large. Maximum size is ${r}MB.`):n.includes(e.type)?g(e):u("File type not supported")},g=async r=>{o(!0),p(0);try{let n=new FormData;n.append("file",r);let a=new XMLHttpRequest;a.upload.onprogress=e=>{if(e.lengthComputable){let t=e.loaded/e.total*100;p(t)}},a.onload=()=>{if(201===a.status){let r=JSON.parse(a.responseText);r.success?(e(r.data),t()):u("Upload failed")}else{let e=JSON.parse(a.responseText);u(e.error||"Upload failed")}o(!1)},a.onerror=()=>{u("Upload failed"),o(!1)},a.open("POST","https://openchat-pwa-develop.up.railway.app/api/upload/file");let i=localStorage.getItem("auth_token");i&&a.setRequestHeader("Authorization",`Bearer ${i}`),a.send(n)}catch(e){console.error("Upload error:",e),u("Upload failed"),o(!1)}};return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Upload File"}),(0,d.jsx)("button",{onClick:t,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,d.jsx)(M.X,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),(0,d.jsxs)("div",{className:"p-4",children:[l&&(0,d.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:(0,d.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:l})}),a?(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(S,{className:"w-12 h-12 text-green-500 mx-auto animate-pulse"})}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Uploading... ",Math.round(f),"%"]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${i?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600 hover:border-green-400"}`,onDragOver:e=>{e.preventDefault(),s(!0)},onDragLeave:e=>{e.preventDefault(),s(!1)},onDrop:e=>{e.preventDefault(),s(!1);let t=Array.from(e.dataTransfer.files);t.length>0&&h(t[0])},children:[(0,d.jsx)(S,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Drag and drop your file here, or click to browse"}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["Maximum ",r,"MB â€¢ Images, Documents, Audio, Video"]}),(0,d.jsx)(k.Button,{onClick:()=>m.current?.click(),className:"mt-4",variant:"outline",children:"Browse Files"})]}),(0,d.jsxs)("div",{className:"mt-4 text-xs text-gray-500 dark:text-gray-500",children:[(0,d.jsx)("p",{className:"font-medium mb-1",children:"Supported formats:"}),(0,d.jsx)("p",{children:"Images: JPEG, PNG, GIF, WebP"}),(0,d.jsx)("p",{children:"Documents: PDF, TXT"}),(0,d.jsx)("p",{children:"Audio: MP3, WAV"}),(0,d.jsx)("p",{children:"Video: MP4, WebM"})]})]})]}),(0,d.jsx)("input",{ref:m,type:"file",onChange:e=>{let t=e.target.files;t&&t.length>0&&h(t[0])},accept:n.join(","),className:"hidden"})]})})}(0,f.default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),(0,f.default)("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var A=e.i(46213);let D=(0,f.default)("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]),T=["ðŸ‘","â¤ï¸","ðŸ˜‚","ðŸ˜®","ðŸ˜¢","ðŸ˜¡"];function I({messageId:e,reactions:t,onAddReaction:r,onRemoveReaction:n}){let[a,o]=(0,c.useState)(!1),[i,s]=(0,c.useState)(null),l=(0,c.useRef)(null),u=(0,c.useRef)(null),f=()=>{o(!1),s(null)};return(0,c.useEffect)(()=>{if(!a)return;let e=()=>{let e=l.current,t=u.current;if(!e||!t)return;let r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=window.innerWidth,o=window.innerHeight,i=r.bottom+8,d="top left";i+n.height>o-8&&(i=r.top-n.height-8,d="bottom left");let c=r.left;c+n.width>a-8&&(c=r.right-n.width,d=d.replace("left","right")),c<8&&(c=8);let f=Math.min(Math.max(r.left+r.width/2-c,0),n.width),p=Math.min(Math.max(r.top+r.height/2-i,0),n.height);s({top:i,left:c,origin:`${f}px ${p}px`})};return requestAnimationFrame(()=>{e()}),window.addEventListener("resize",e),window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e,!0)}},[a]),(0,d.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[t.map(t=>(0,d.jsxs)("button",{onClick:()=>{var a;return a=t.emoji,void(t.hasReacted?n(e,a):r(e,a))},className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium transition-colors ${t.hasReacted?"bg-green-100 text-green-800 border border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700":"bg-gray-100 text-gray-700 border border-gray-200 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}`,title:`${t.users.map(e=>e.displayName).join(", ")} reacted with ${t.emoji}`,children:[(0,d.jsx)("span",{children:t.emoji}),(0,d.jsx)("span",{children:t.count})]},t.emoji)),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("button",{ref:l,onClick:()=>a?f():void o(!0),className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 transition-colors",title:"Add reaction",children:(0,d.jsx)(D,{className:"w-3 h-3 text-gray-500 dark:text-gray-400"})}),a&&"u">typeof document&&(0,A.createPortal)((0,d.jsxs)("div",{className:"fixed inset-0 z-40",children:[(0,d.jsx)("button",{type:"button",className:"absolute inset-0 cursor-default",onClick:f,"aria-label":"Close reactions"}),(0,d.jsx)("div",{ref:u,className:"fixed z-50 rounded-lg border border-gray-200 bg-white p-2 shadow-lg dark:border-gray-600 dark:bg-gray-800",style:{top:i?.top??0,left:i?.left??0,transformOrigin:i?.origin??"top left",visibility:i?"visible":"hidden",pointerEvents:i?"auto":"none"},children:(0,d.jsx)("div",{className:"flex gap-1",children:T.map(t=>(0,d.jsx)("button",{onClick:()=>{r(e,t),f()},className:"w-8 h-8 flex items-center justify-center rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:`React with ${t}`,children:t},t))})})]}),document.body)]})]})}let F=(0,f.default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),L=(0,f.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),O=(0,f.default)("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]),_=(0,f.default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),H=(0,f.default)("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);var z=e.i(91967),B=e.i(26099),$=e.i(80600),W=e.i(54856),K=e.i(44101),V=e.i(89277),U=c.createContext(void 0);function G(e){let t=c.useContext(U);return e||t||"ltr"}var X=e.i(5457),q=0;function Y(){c.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Z()),document.body.insertAdjacentElement("beforeend",e[1]??Z()),q++,()=>{1===q&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),q--}},[])}function Z(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var J=e.i(10499),Q="focusScope.autoFocusOnMount",ee="focusScope.autoFocusOnUnmount",et={bubbles:!1,cancelable:!0},er=c.forwardRef((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[s,l]=c.useState(null),u=(0,J.useCallbackRef)(a),f=(0,J.useCallbackRef)(o),p=c.useRef(null),m=(0,B.useComposedRefs)(t,e=>l(e)),h=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(n){let e=function(e){if(h.paused||!s)return;let t=e.target;s.contains(t)?p.current=t:eo(p.current,{select:!0})},t=function(e){if(h.paused||!s)return;let t=e.relatedTarget;null!==t&&(s.contains(t)||eo(p.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&eo(s)});return s&&r.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,s,h.paused]),c.useEffect(()=>{if(s){ei.add(h);let e=document.activeElement;if(!s.contains(e)){let t=new CustomEvent(Q,et);s.addEventListener(Q,u),s.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(eo(n,{select:t}),document.activeElement!==r)return}(en(s).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&eo(s))}return()=>{s.removeEventListener(Q,u),setTimeout(()=>{let t=new CustomEvent(ee,et);s.addEventListener(ee,f),s.dispatchEvent(t),t.defaultPrevented||eo(e??document.body,{select:!0}),s.removeEventListener(ee,f),ei.remove(h)},0)}}},[s,u,f,h]);let g=c.useCallback(e=>{if(!r&&!n||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){var o;let t,n=e.currentTarget,[i,s]=[ea(t=en(o=n),o),ea(t.reverse(),o)];i&&s?e.shiftKey||a!==s?e.shiftKey&&a===i&&(e.preventDefault(),r&&eo(s,{select:!0})):(e.preventDefault(),r&&eo(i,{select:!0})):a===n&&e.preventDefault()}},[r,n,h.paused]);return(0,d.jsx)(K.Primitive.div,{tabIndex:-1,...i,ref:m,onKeyDown:g})});function en(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ea(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function eo(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}er.displayName="FocusScope";var ei=(t=[],{add(e){let r=t[0];e!==r&&r?.pause(),(t=es(t,e)).unshift(e)},remove(e){t=es(t,e),t[0]?.resume()}});function es(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}var el=e.i(90464),ed=c[" useId ".trim().toString()]||(()=>void 0),ec=0;function eu(e){let[t,r]=c.useState(ed());return(0,el.useLayoutEffect)(()=>{e||r(e=>e??String(ec++))},[e]),e||(t?`radix-${t}`:"")}let ef=["top","right","bottom","left"],ep=Math.min,em=Math.max,eh=Math.round,eg=Math.floor,ey=e=>({x:e,y:e}),ex={left:"right",right:"left",bottom:"top",top:"bottom"},ev={start:"end",end:"start"};function ew(e,t){return"function"==typeof e?e(t):e}function eb(e){return e.split("-")[0]}function ej(e){return e.split("-")[1]}function ek(e){return"x"===e?"y":"x"}function eN(e){return"y"===e?"height":"width"}let eE=new Set(["top","bottom"]);function eR(e){return eE.has(eb(e))?"y":"x"}function eC(e){return e.replace(/start|end/g,e=>ev[e])}let eS=["left","right"],eM=["right","left"],eP=["top","bottom"],eA=["bottom","top"];function eD(e){return e.replace(/left|right|bottom|top/g,e=>ex[e])}function eT(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function eI(e){let{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function eF(e,t,r){let n,{reference:a,floating:o}=e,i=eR(t),s=ek(eR(t)),l=eN(s),d=eb(t),c="y"===i,u=a.x+a.width/2-o.width/2,f=a.y+a.height/2-o.height/2,p=a[l]/2-o[l]/2;switch(d){case"top":n={x:u,y:a.y-o.height};break;case"bottom":n={x:u,y:a.y+a.height};break;case"right":n={x:a.x+a.width,y:f};break;case"left":n={x:a.x-o.width,y:f};break;default:n={x:a.x,y:a.y}}switch(ej(t)){case"start":n[s]-=p*(r&&c?-1:1);break;case"end":n[s]+=p*(r&&c?-1:1)}return n}let eL=async(e,t,r)=>{let{placement:n="bottom",strategy:a="absolute",middleware:o=[],platform:i}=r,s=o.filter(Boolean),l=await (null==i.isRTL?void 0:i.isRTL(t)),d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:c,y:u}=eF(d,n,l),f=n,p={},m=0;for(let r=0;r<s.length;r++){let{name:o,fn:h}=s[r],{x:g,y:y,data:x,reset:v}=await h({x:c,y:u,initialPlacement:n,placement:f,strategy:a,middlewareData:p,rects:d,platform:i,elements:{reference:e,floating:t}});c=null!=g?g:c,u=null!=y?y:u,p={...p,[o]:{...p[o],...x}},v&&m<=50&&(m++,"object"==typeof v&&(v.placement&&(f=v.placement),v.rects&&(d=!0===v.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):v.rects),{x:c,y:u}=eF(d,f,l)),r=-1)}return{x:c,y:u,placement:f,strategy:a,middlewareData:p}};async function eO(e,t){var r;void 0===t&&(t={});let{x:n,y:a,platform:o,rects:i,elements:s,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:f=!1,padding:p=0}=ew(t,e),m=eT(p),h=s[f?"floating"===u?"reference":"floating":u],g=eI(await o.getClippingRect({element:null==(r=await (null==o.isElement?void 0:o.isElement(h)))||r?h:h.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:d,rootBoundary:c,strategy:l})),y="floating"===u?{x:n,y:a,width:i.floating.width,height:i.floating.height}:i.reference,x=await (null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),v=await (null==o.isElement?void 0:o.isElement(x))&&await (null==o.getScale?void 0:o.getScale(x))||{x:1,y:1},w=eI(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:x,strategy:l}):y);return{top:(g.top-w.top+m.top)/v.y,bottom:(w.bottom-g.bottom+m.bottom)/v.y,left:(g.left-w.left+m.left)/v.x,right:(w.right-g.right+m.right)/v.x}}function e_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function eH(e){return ef.some(t=>e[t]>=0)}let ez=new Set(["left","top"]);async function eB(e,t){let{placement:r,platform:n,elements:a}=e,o=await (null==n.isRTL?void 0:n.isRTL(a.floating)),i=eb(r),s=ej(r),l="y"===eR(r),d=ez.has(i)?-1:1,c=o&&l?-1:1,u=ew(t,e),{mainAxis:f,crossAxis:p,alignmentAxis:m}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return s&&"number"==typeof m&&(p="end"===s?-1*m:m),l?{x:p*c,y:f*d}:{x:f*d,y:p*c}}function e$(){return"u">typeof window}function eW(e){return eU(e)?(e.nodeName||"").toLowerCase():"#document"}function eK(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function eV(e){var t;return null==(t=(eU(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function eU(e){return!!e$()&&(e instanceof Node||e instanceof eK(e).Node)}function eG(e){return!!e$()&&(e instanceof Element||e instanceof eK(e).Element)}function eX(e){return!!e$()&&(e instanceof HTMLElement||e instanceof eK(e).HTMLElement)}function eq(e){return!(!e$()||"u"<typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof eK(e).ShadowRoot)}let eY=new Set(["inline","contents"]);function eZ(e){let{overflow:t,overflowX:r,overflowY:n,display:a}=e6(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!eY.has(a)}let eJ=new Set(["table","td","th"]),eQ=[":popover-open",":modal"];function e0(e){return eQ.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let e1=["transform","translate","scale","rotate","perspective"],e2=["transform","translate","scale","rotate","perspective","filter"],e5=["paint","layout","strict","content"];function e4(e){let t=e3(),r=eG(e)?e6(e):e;return e1.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||e2.some(e=>(r.willChange||"").includes(e))||e5.some(e=>(r.contain||"").includes(e))}function e3(){return!("u"<typeof CSS)&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let e8=new Set(["html","body","#document"]);function e9(e){return e8.has(eW(e))}function e6(e){return eK(e).getComputedStyle(e)}function e7(e){return eG(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function te(e){if("html"===eW(e))return e;let t=e.assignedSlot||e.parentNode||eq(e)&&e.host||eV(e);return eq(t)?t.host:t}function tt(e,t,r){var n;void 0===t&&(t=[]),void 0===r&&(r=!0);let a=function e(t){let r=te(t);return e9(r)?t.ownerDocument?t.ownerDocument.body:t.body:eX(r)&&eZ(r)?r:e(r)}(e),o=a===(null==(n=e.ownerDocument)?void 0:n.body),i=eK(a);if(o){let e=tr(i);return t.concat(i,i.visualViewport||[],eZ(a)?a:[],e&&r?tt(e):[])}return t.concat(a,tt(a,[],r))}function tr(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function tn(e){let t=e6(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,a=eX(e),o=a?e.offsetWidth:r,i=a?e.offsetHeight:n,s=eh(r)!==o||eh(n)!==i;return s&&(r=o,n=i),{width:r,height:n,$:s}}function ta(e){return eG(e)?e:e.contextElement}function to(e){let t=ta(e);if(!eX(t))return ey(1);let r=t.getBoundingClientRect(),{width:n,height:a,$:o}=tn(t),i=(o?eh(r.width):r.width)/n,s=(o?eh(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}let ti=ey(0);function ts(e){let t=eK(e);return e3()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:ti}function tl(e,t,r,n){var a;void 0===t&&(t=!1),void 0===r&&(r=!1);let o=e.getBoundingClientRect(),i=ta(e),s=ey(1);t&&(n?eG(n)&&(s=to(n)):s=to(e));let l=(void 0===(a=r)&&(a=!1),n&&(!a||n===eK(i))&&a)?ts(i):ey(0),d=(o.left+l.x)/s.x,c=(o.top+l.y)/s.y,u=o.width/s.x,f=o.height/s.y;if(i){let e=eK(i),t=n&&eG(n)?eK(n):n,r=e,a=tr(r);for(;a&&n&&t!==r;){let e=to(a),t=a.getBoundingClientRect(),n=e6(a),o=t.left+(a.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(n.paddingTop))*e.y;d*=e.x,c*=e.y,u*=e.x,f*=e.y,d+=o,c+=i,a=tr(r=eK(a))}}return eI({width:u,height:f,x:d,y:c})}function td(e,t){let r=e7(e).scrollLeft;return t?t.left+r:tl(eV(e)).left+r}function tc(e,t){let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-td(e,r),y:r.top+t.scrollTop}}let tu=new Set(["absolute","fixed"]);function tf(e,t,r){var n;let a;if("viewport"===t)a=function(e,t){let r=eK(e),n=eV(e),a=r.visualViewport,o=n.clientWidth,i=n.clientHeight,s=0,l=0;if(a){o=a.width,i=a.height;let e=e3();(!e||e&&"fixed"===t)&&(s=a.offsetLeft,l=a.offsetTop)}let d=td(n);if(d<=0){let e=n.ownerDocument,t=e.body,r=getComputedStyle(t),a="CSS1Compat"===e.compatMode&&parseFloat(r.marginLeft)+parseFloat(r.marginRight)||0,i=Math.abs(n.clientWidth-t.clientWidth-a);i<=25&&(o-=i)}else d<=25&&(o+=d);return{width:o,height:i,x:s,y:l}}(e,r);else if("document"===t){let t,r,o,i,s,l,d;n=eV(e),t=eV(n),r=e7(n),o=n.ownerDocument.body,i=em(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=em(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),l=-r.scrollLeft+td(n),d=-r.scrollTop,"rtl"===e6(o).direction&&(l+=em(t.clientWidth,o.clientWidth)-i),a={width:i,height:s,x:l,y:d}}else if(eG(t)){let e,n,o,i,s,l;n=(e=tl(t,!0,"fixed"===r)).top+t.clientTop,o=e.left+t.clientLeft,i=eX(t)?to(t):ey(1),s=t.clientWidth*i.x,l=t.clientHeight*i.y,a={width:s,height:l,x:o*i.x,y:n*i.y}}else{let r=ts(e);a={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return eI(a)}function tp(e){return"static"===e6(e).position}function tm(e,t){if(!eX(e)||"fixed"===e6(e).position)return null;if(t)return t(e);let r=e.offsetParent;return eV(e)===r&&(r=r.ownerDocument.body),r}function th(e,t){var r;let n=eK(e);if(e0(e))return n;if(!eX(e)){let t=te(e);for(;t&&!e9(t);){if(eG(t)&&!tp(t))return t;t=te(t)}return n}let a=tm(e,t);for(;a&&(r=a,eJ.has(eW(r)))&&tp(a);)a=tm(a,t);return a&&e9(a)&&tp(a)&&!e4(a)?n:a||function(e){let t=te(e);for(;eX(t)&&!e9(t);){if(e4(t))return t;if(e0(t))break;t=te(t)}return null}(e)||n}let tg=async function(e){let t=this.getOffsetParent||th,r=this.getDimensions,n=await r(e.floating);return{reference:function(e,t,r){let n=eX(t),a=eV(t),o="fixed"===r,i=tl(e,!0,o,t),s={scrollLeft:0,scrollTop:0},l=ey(0);if(n||!n&&!o)if(("body"!==eW(t)||eZ(a))&&(s=e7(t)),n){let e=tl(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&(l.x=td(a));o&&!n&&a&&(l.x=td(a));let d=!a||n||o?ey(0):tc(a,s);return{x:i.left+s.scrollLeft-l.x-d.x,y:i.top+s.scrollTop-l.y-d.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}},ty={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e,o="fixed"===a,i=eV(n),s=!!t&&e0(t.floating);if(n===i||s&&o)return r;let l={scrollLeft:0,scrollTop:0},d=ey(1),c=ey(0),u=eX(n);if((u||!u&&!o)&&(("body"!==eW(n)||eZ(i))&&(l=e7(n)),eX(n))){let e=tl(n);d=to(n),c.x=e.x+n.clientLeft,c.y=e.y+n.clientTop}let f=!i||u||o?ey(0):tc(i,l);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-l.scrollLeft*d.x+c.x+f.x,y:r.y*d.y-l.scrollTop*d.y+c.y+f.y}},getDocumentElement:eV,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e,o=[..."clippingAncestors"===r?e0(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let n=tt(e,[],!1).filter(e=>eG(e)&&"body"!==eW(e)),a=null,o="fixed"===e6(e).position,i=o?te(e):e;for(;eG(i)&&!e9(i);){let t=e6(i),r=e4(i);r||"fixed"!==t.position||(a=null),(o?!r&&!a:!r&&"static"===t.position&&!!a&&tu.has(a.position)||eZ(i)&&!r&&function e(t,r){let n=te(t);return!(n===r||!eG(n)||e9(n))&&("fixed"===e6(n).position||e(n,r))}(e,i))?n=n.filter(e=>e!==i):a=t,i=te(i)}return t.set(e,n),n}(t,this._c):[].concat(r),n],i=o[0],s=o.reduce((e,r)=>{let n=tf(t,r,a);return e.top=em(n.top,e.top),e.right=ep(n.right,e.right),e.bottom=ep(n.bottom,e.bottom),e.left=em(n.left,e.left),e},tf(t,i,a));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:th,getElementRects:tg,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=tn(e);return{width:t,height:r}},getScale:to,isElement:eG,isRTL:function(e){return"rtl"===e6(e).direction}};function tx(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let tv=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:a,rects:o,platform:i,elements:s,middlewareData:l}=t,{element:d,padding:c=0}=ew(e,t)||{};if(null==d)return{};let u=eT(c),f={x:r,y:n},p=ek(eR(a)),m=eN(p),h=await i.getDimensions(d),g="y"===p,y=g?"clientHeight":"clientWidth",x=o.reference[m]+o.reference[p]-f[p]-o.floating[m],v=f[p]-o.reference[p],w=await (null==i.getOffsetParent?void 0:i.getOffsetParent(d)),b=w?w[y]:0;b&&await (null==i.isElement?void 0:i.isElement(w))||(b=s.floating[y]||o.floating[m]);let j=b/2-h[m]/2-1,k=ep(u[g?"top":"left"],j),N=ep(u[g?"bottom":"right"],j),E=b-h[m]-N,R=b/2-h[m]/2+(x/2-v/2),C=em(k,ep(R,E)),S=!l.arrow&&null!=ej(a)&&R!==C&&o.reference[m]/2-(R<k?k:N)-h[m]/2<0,M=S?R<k?R-k:R-E:0;return{[p]:f[p]+M,data:{[p]:C,centerOffset:R-C-M,...S&&{alignmentOffset:M}},reset:S}}});var tw="u">typeof document?c.useLayoutEffect:function(){};function tb(e,t){let r,n,a;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!tb(e[n],t[n]))return!1;return!0}if((r=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,a[n]))return!1;for(n=r;0!=n--;){let r=a[n];if(("_owner"!==r||!e.$$typeof)&&!tb(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function tj(e){return"u"<typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function tk(e,t){let r=tj(e);return Math.round(t*r)/r}function tN(e){let t=c.useRef(e);return tw(()=>{t.current=e}),t}var tE=c.forwardRef((e,t)=>{let{children:r,width:n=10,height:a=5,...o}=e;return(0,d.jsx)(K.Primitive.svg,{...o,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,d.jsx)("polygon",{points:"0,0 30,0 15,10"})})});tE.displayName="Arrow";var tR="Popper",[tC,tS]=(0,$.createContextScope)(tR),[tM,tP]=tC(tR),tA=e=>{let{__scopePopper:t,children:r}=e,[n,a]=c.useState(null);return(0,d.jsx)(tM,{scope:t,anchor:n,onAnchorChange:a,children:r})};tA.displayName=tR;var tD="PopperAnchor",tT=c.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:n,...a}=e,o=tP(tD,r),i=c.useRef(null),s=(0,B.useComposedRefs)(t,i),l=c.useRef(null);return c.useEffect(()=>{let e=l.current;l.current=n?.current||i.current,e!==l.current&&o.onAnchorChange(l.current)}),n?null:(0,d.jsx)(K.Primitive.div,{...a,ref:s})});tT.displayName=tD;var tI="PopperContent",[tF,tL]=tC(tI),tO=c.forwardRef((e,t)=>{var r,n,a,o,i,s,l,u,f,p,m,h,g,y,x,v,w,b,j,k,N;let{__scopePopper:E,side:R="bottom",sideOffset:C=0,align:S="center",alignOffset:M=0,arrowPadding:P=0,avoidCollisions:D=!0,collisionBoundary:T=[],collisionPadding:I=0,sticky:F="partial",hideWhenDetached:L=!1,updatePositionStrategy:O="optimized",onPlaced:_,...H}=e,z=tP(tI,E),[$,W]=c.useState(null),V=(0,B.useComposedRefs)(t,e=>W(e)),[U,G]=c.useState(null),X=function(e){let[t,r]=c.useState(void 0);return(0,el.useLayoutEffect)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,a;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,a=t.blockSize}else n=e.offsetWidth,a=e.offsetHeight;r({width:n,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(U),q=X?.width??0,Y=X?.height??0,Z="number"==typeof I?I:{top:0,right:0,bottom:0,left:0,...I},Q=Array.isArray(T)?T:[T],ee=Q.length>0,et={padding:Z,boundary:Q.filter(tB),altBoundary:ee},{refs:er,floatingStyles:en,placement:ea,isPositioned:eo,middlewareData:ei}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:o,floating:i}={},transform:s=!0,whileElementsMounted:l,open:d}=e,[u,f]=c.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=c.useState(n);tb(p,n)||m(n);let[h,g]=c.useState(null),[y,x]=c.useState(null),v=c.useCallback(e=>{e!==k.current&&(k.current=e,g(e))},[]),w=c.useCallback(e=>{e!==N.current&&(N.current=e,x(e))},[]),b=o||h,j=i||y,k=c.useRef(null),N=c.useRef(null),E=c.useRef(u),R=null!=l,C=tN(l),S=tN(a),M=tN(d),P=c.useCallback(()=>{var e,n;let a,o,i;if(!k.current||!N.current)return;let s={placement:t,strategy:r,middleware:p};S.current&&(s.platform=S.current),(e=k.current,n=N.current,a=new Map,i={...(o={platform:ty,...s}).platform,_c:a},eL(e,n,{...o,platform:i})).then(e=>{let t={...e,isPositioned:!1!==M.current};D.current&&!tb(E.current,t)&&(E.current=t,A.flushSync(()=>{f(t)}))})},[p,t,r,S,M]);tw(()=>{!1===d&&E.current.isPositioned&&(E.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[d]);let D=c.useRef(!1);tw(()=>(D.current=!0,()=>{D.current=!1}),[]),tw(()=>{if(b&&(k.current=b),j&&(N.current=j),b&&j){if(C.current)return C.current(b,j,P);P()}},[b,j,P,C,R]);let T=c.useMemo(()=>({reference:k,floating:N,setReference:v,setFloating:w}),[v,w]),I=c.useMemo(()=>({reference:b,floating:j}),[b,j]),F=c.useMemo(()=>{let e={position:r,left:0,top:0};if(!I.floating)return e;let t=tk(I.floating,u.x),n=tk(I.floating,u.y);return s?{...e,transform:"translate("+t+"px, "+n+"px)",...tj(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,s,I.floating,u.x,u.y]);return c.useMemo(()=>({...u,update:P,refs:T,elements:I,floatingStyles:F}),[u,P,T,I,F])}({strategy:"fixed",placement:R+("center"!==S?"-"+S:""),whileElementsMounted:(...e)=>(function(e,t,r,n){let a;void 0===n&&(n={});let{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:d=!1}=n,c=ta(e),u=o||i?[...c?tt(c):[],...tt(t)]:[];u.forEach(e=>{o&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)});let f=c&&l?function(e,t){let r,n=null,a=eV(e);function o(){var e;clearTimeout(r),null==(e=n)||e.disconnect(),n=null}return!function i(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();let d=e.getBoundingClientRect(),{left:c,top:u,width:f,height:p}=d;if(s||t(),!f||!p)return;let m={rootMargin:-eg(u)+"px "+-eg(a.clientWidth-(c+f))+"px "+-eg(a.clientHeight-(u+p))+"px "+-eg(c)+"px",threshold:em(0,ep(1,l))||1},h=!0;function g(t){let n=t[0].intersectionRatio;if(n!==l){if(!h)return i();n?i(!1,n):r=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==n||tx(d,e.getBoundingClientRect())||i(),h=!1}try{n=new IntersectionObserver(g,{...m,root:a.ownerDocument})}catch(e){n=new IntersectionObserver(g,m)}n.observe(e)}(!0),o}(c,r):null,p=-1,m=null;s&&(m=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),r()}),c&&!d&&m.observe(c),m.observe(t));let h=d?tl(e):null;return d&&function t(){let n=tl(e);h&&!tx(h,n)&&r(),h=n,a=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{o&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)}),null==f||f(),null==(e=m)||e.disconnect(),m=null,d&&cancelAnimationFrame(a)}})(...e,{animationFrame:"always"===O}),elements:{reference:z.anchor},middleware:[{...{name:"offset",options:a=r={mainAxis:C+Y,alignmentAxis:M},async fn(e){var t,r;let{x:n,y:o,placement:i,middlewareData:s}=e,l=await eB(e,a);return i===(null==(t=s.offset)?void 0:t.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:i}}}},options:[r,n]},D&&{...{name:"shift",options:f=l={mainAxis:!0,crossAxis:!1,limiter:"partial"===F?{...(void 0===(s=o)&&(s={}),{options:s,fn(e){let{x:t,y:r,placement:n,rects:a,middlewareData:o}=e,{offset:i=0,mainAxis:l=!0,crossAxis:d=!0}=ew(s,e),c={x:t,y:r},u=eR(n),f=ek(u),p=c[f],m=c[u],h=ew(i,e),g="number"==typeof h?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(l){let e="y"===f?"height":"width",t=a.reference[f]-a.floating[e]+g.mainAxis,r=a.reference[f]+a.reference[e]-g.mainAxis;p<t?p=t:p>r&&(p=r)}if(d){var y,x;let e="y"===f?"width":"height",t=ez.has(eb(n)),r=a.reference[u]-a.floating[e]+(t&&(null==(y=o.offset)?void 0:y[u])||0)+(t?0:g.crossAxis),i=a.reference[u]+a.reference[e]+(t?0:(null==(x=o.offset)?void 0:x[u])||0)-(t?g.crossAxis:0);m<r?m=r:m>i&&(m=i)}return{[f]:p,[u]:m}}}),options:[o,i]}:void 0,...et},async fn(e){let{x:t,y:r,placement:n}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:i={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...s}=ew(f,e),l={x:t,y:r},d=await eO(e,s),c=eR(eb(n)),u=ek(c),p=l[u],m=l[c];if(a){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",r=p+d[e],n=p-d[t];p=em(r,ep(p,n))}if(o){let e="y"===c?"top":"left",t="y"===c?"bottom":"right",r=m+d[e],n=m-d[t];m=em(r,ep(m,n))}let h=i.fn({...e,[u]:p,[c]:m});return{...h,data:{x:h.x-t,y:h.y-r,enabled:{[u]:a,[c]:o}}}}},options:[l,u]},D&&{...{name:"flip",options:h=p={...et},async fn(e){var t,r,n,a,o,i,s,l;let d,c,u,{placement:f,middlewareData:p,rects:m,initialPlacement:g,platform:y,elements:x}=e,{mainAxis:v=!0,crossAxis:w=!0,fallbackPlacements:b,fallbackStrategy:j="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:N=!0,...E}=ew(h,e);if(null!=(t=p.arrow)&&t.alignmentOffset)return{};let R=eb(f),C=eR(g),S=eb(g)===g,M=await (null==y.isRTL?void 0:y.isRTL(x.floating)),P=b||(S||!N?[eD(g)]:(d=eD(g),[eC(g),d,eC(d)])),A="none"!==k;!b&&A&&P.push(...(c=ej(g),u=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?eM:eS;return t?eS:eM;case"left":case"right":return t?eP:eA;default:return[]}}(eb(g),"start"===k,M),c&&(u=u.map(e=>e+"-"+c),N&&(u=u.concat(u.map(eC)))),u));let D=[g,...P],T=await eO(e,E),I=[],F=(null==(r=p.flip)?void 0:r.overflows)||[];if(v&&I.push(T[R]),w){let e,t,r,n,a=(i=f,s=m,void 0===(l=M)&&(l=!1),e=ej(i),r=eN(t=ek(eR(i))),n="x"===t?e===(l?"end":"start")?"right":"left":"start"===e?"bottom":"top",s.reference[r]>s.floating[r]&&(n=eD(n)),[n,eD(n)]);I.push(T[a[0]],T[a[1]])}if(F=[...F,{placement:f,overflows:I}],!I.every(e=>e<=0)){let e=((null==(n=p.flip)?void 0:n.index)||0)+1,t=D[e];if(t&&("alignment"!==w||C===eR(t)||F.every(e=>eR(e.placement)!==C||e.overflows[0]>0)))return{data:{index:e,overflows:F},reset:{placement:t}};let r=null==(a=F.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:a.placement;if(!r)switch(j){case"bestFit":{let e=null==(o=F.filter(e=>{if(A){let t=eR(e.placement);return t===C||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0];e&&(r=e);break}case"initialPlacement":r=g}if(f!==r)return{reset:{placement:r}}}return{}}},options:[p,m]},{...{name:"size",options:x=g={...et,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:a,height:o}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${r}px`),i.setProperty("--radix-popper-available-height",`${n}px`),i.setProperty("--radix-popper-anchor-width",`${a}px`),i.setProperty("--radix-popper-anchor-height",`${o}px`)}},async fn(e){var t,r;let n,a,{placement:o,rects:i,platform:s,elements:l}=e,{apply:d=()=>{},...c}=ew(x,e),u=await eO(e,c),f=eb(o),p=ej(o),m="y"===eR(o),{width:h,height:g}=i.floating;"top"===f||"bottom"===f?(n=f,a=p===(await (null==s.isRTL?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(a=f,n="end"===p?"top":"bottom");let y=g-u.top-u.bottom,v=h-u.left-u.right,w=ep(g-u[n],y),b=ep(h-u[a],v),j=!e.middlewareData.shift,k=w,N=b;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(N=v),null!=(r=e.middlewareData.shift)&&r.enabled.y&&(k=y),j&&!p){let e=em(u.left,0),t=em(u.right,0),r=em(u.top,0),n=em(u.bottom,0);m?N=h-2*(0!==e||0!==t?e+t:em(u.left,u.right)):k=g-2*(0!==r||0!==n?r+n:em(u.top,u.bottom))}await d({...e,availableWidth:N,availableHeight:k});let E=await s.getDimensions(l.floating);return h!==E.width||g!==E.height?{reset:{rects:!0}}:{}}},options:[g,y]},U&&{...{name:"arrow",options:b=v={element:U,padding:P},fn(e){let{element:t,padding:r}="function"==typeof b?b(e):b;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?tv({element:t.current,padding:r}).fn(e):{}:t?tv({element:t,padding:r}).fn(e):{}}},options:[v,w]},t$({arrowWidth:q,arrowHeight:Y}),L&&{...{name:"hide",options:N=j={strategy:"referenceHidden",...et},async fn(e){let{rects:t}=e,{strategy:r="referenceHidden",...n}=ew(N,e);switch(r){case"referenceHidden":{let r=e_(await eO(e,{...n,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:eH(r)}}}case"escaped":{let r=e_(await eO(e,{...n,altBoundary:!0}),t.floating);return{data:{escapedOffsets:r,escaped:eH(r)}}}default:return{}}}},options:[j,k]}]}),[es,ed]=tW(ea),ec=(0,J.useCallbackRef)(_);(0,el.useLayoutEffect)(()=>{eo&&ec?.()},[eo,ec]);let eu=ei.arrow?.x,ef=ei.arrow?.y,eh=ei.arrow?.centerOffset!==0,[ey,ex]=c.useState();return(0,el.useLayoutEffect)(()=>{$&&ex(window.getComputedStyle($).zIndex)},[$]),(0,d.jsx)("div",{ref:er.setFloating,"data-radix-popper-content-wrapper":"",style:{...en,transform:eo?en.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ey,"--radix-popper-transform-origin":[ei.transformOrigin?.x,ei.transformOrigin?.y].join(" "),...ei.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,d.jsx)(tF,{scope:E,placedSide:es,onArrowChange:G,arrowX:eu,arrowY:ef,shouldHideArrow:eh,children:(0,d.jsx)(K.Primitive.div,{"data-side":es,"data-align":ed,...H,ref:V,style:{...H.style,animation:eo?void 0:"none"}})})})});tO.displayName=tI;var t_="PopperArrow",tH={top:"bottom",right:"left",bottom:"top",left:"right"},tz=c.forwardRef(function(e,t){let{__scopePopper:r,...n}=e,a=tL(t_,r),o=tH[a.placedSide];return(0,d.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,d.jsx)(tE,{...n,ref:t,style:{...n.style,display:"block"}})})});function tB(e){return null!==e}tz.displayName=t_;var t$=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:n,middlewareData:a}=t,o=a.arrow?.centerOffset!==0,i=o?0:e.arrowWidth,s=o?0:e.arrowHeight,[l,d]=tW(r),c={start:"0%",center:"50%",end:"100%"}[d],u=(a.arrow?.x??0)+i/2,f=(a.arrow?.y??0)+s/2,p="",m="";return"bottom"===l?(p=o?c:`${u}px`,m=`${-s}px`):"top"===l?(p=o?c:`${u}px`,m=`${n.floating.height+s}px`):"right"===l?(p=`${-s}px`,m=o?c:`${f}px`):"left"===l&&(p=`${n.floating.width+s}px`,m=o?c:`${f}px`),{data:{x:p,y:m}}}});function tW(e){let[t,r="center"]=e.split("-");return[t,r]}var tK=e.i(86011),tV=e.i(77330),tU="rovingFocusGroup.onEntryFocus",tG={bubbles:!1,cancelable:!0},tX="RovingFocusGroup",[tq,tY,tZ]=(0,V.createCollection)(tX),[tJ,tQ]=(0,$.createContextScope)(tX,[tZ]),[t0,t1]=tJ(tX),t2=c.forwardRef((e,t)=>(0,d.jsx)(tq.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,d.jsx)(tq.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,d.jsx)(t5,{...e,ref:t})})}));t2.displayName=tX;var t5=c.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...p}=e,m=c.useRef(null),h=(0,B.useComposedRefs)(t,m),g=G(o),[y,x]=(0,W.useControllableState)({prop:i,defaultProp:s??null,onChange:l,caller:tX}),[v,w]=c.useState(!1),b=(0,J.useCallbackRef)(u),j=tY(r),k=c.useRef(!1),[N,E]=c.useState(0);return c.useEffect(()=>{let e=m.current;if(e)return e.addEventListener(tU,b),()=>e.removeEventListener(tU,b)},[b]),(0,d.jsx)(t0,{scope:r,orientation:n,dir:g,loop:a,currentTabStopId:y,onItemFocus:c.useCallback(e=>x(e),[x]),onItemShiftTab:c.useCallback(()=>w(!0),[]),onFocusableItemAdd:c.useCallback(()=>E(e=>e+1),[]),onFocusableItemRemove:c.useCallback(()=>E(e=>e-1),[]),children:(0,d.jsx)(K.Primitive.div,{tabIndex:v||0===N?-1:0,"data-orientation":n,...p,ref:h,style:{outline:"none",...e.style},onMouseDown:(0,z.composeEventHandlers)(e.onMouseDown,()=>{k.current=!0}),onFocus:(0,z.composeEventHandlers)(e.onFocus,e=>{let t=!k.current;if(e.target===e.currentTarget&&t&&!v){let t=new CustomEvent(tU,tG);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=j().filter(e=>e.focusable);t9([e.find(e=>e.active),e.find(e=>e.id===y),...e].filter(Boolean).map(e=>e.ref.current),f)}}k.current=!1}),onBlur:(0,z.composeEventHandlers)(e.onBlur,()=>w(!1))})})}),t4="RovingFocusGroupItem",t3=c.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:o,children:i,...s}=e,l=eu(),u=o||l,f=t1(t4,r),p=f.currentTabStopId===u,m=tY(r),{onFocusableItemAdd:h,onFocusableItemRemove:g,currentTabStopId:y}=f;return c.useEffect(()=>{if(n)return h(),()=>g()},[n,h,g]),(0,d.jsx)(tq.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:(0,d.jsx)(K.Primitive.span,{tabIndex:p?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:(0,z.composeEventHandlers)(e.onMouseDown,e=>{n?f.onItemFocus(u):e.preventDefault()}),onFocus:(0,z.composeEventHandlers)(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:(0,z.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let a=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return t8[a]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){var r,n;"prev"===t&&a.reverse();let o=a.indexOf(e.currentTarget);a=f.loop?(r=a,n=o+1,r.map((e,t)=>r[(n+t)%r.length])):a.slice(o+1)}setTimeout(()=>t9(a))}}),children:"function"==typeof i?i({isCurrentTabStop:p,hasTabStop:null!=y}):i})})});t3.displayName=t4;var t8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function t9(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}var t6=e.i(65323),t7=new WeakMap,re=new WeakMap,rt={},rr=0,rn=function(e){return e&&(e.host||rn(e.parentNode))},ra=function(e,t,r,n){var a=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=rn(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});rt[r]||(rt[r]=new WeakMap);var o=rt[r],i=[],s=new Set,l=new Set(a),d=function(e){!e||s.has(e)||(s.add(e),d(e.parentNode))};a.forEach(d);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(s.has(e))c(e);else try{var t=e.getAttribute(n),a=null!==t&&"false"!==t,l=(t7.get(e)||0)+1,d=(o.get(e)||0)+1;t7.set(e,l),o.set(e,d),i.push(e),1===l&&a&&re.set(e,!0),1===d&&e.setAttribute(r,"true"),a||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return c(t),s.clear(),rr++,function(){i.forEach(function(e){var t=t7.get(e)-1,a=o.get(e)-1;t7.set(e,t),o.set(e,a),t||(re.has(e)||e.removeAttribute(n),re.delete(e)),a||e.removeAttribute(r)}),--rr||(t7=new WeakMap,t7=new WeakMap,re=new WeakMap,rt={})}},ro=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||("u"<typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),ra(n,a,r,"aria-hidden")):function(){return null}},ri=function(){return(ri=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function rs(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}var rl=("function"==typeof SuppressedError&&SuppressedError,"right-scroll-bar-position"),rd="width-before-scroll-bar";function rc(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var ru="u">typeof window?c.useLayoutEffect:c.useEffect,rf=new WeakMap,rp=(void 0===r&&(r={}),(void 0===n&&(n=function(e){return e}),a=[],o=!1,i={read:function(){if(o)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:null},useMedium:function(e){var t=n(e,o);return a.push(t),function(){a=a.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(o=!0;a.length;){var t=a;a=[],t.forEach(e)}a={push:function(t){return e(t)},filter:function(){return a}}},assignMedium:function(e){o=!0;var t=[];if(a.length){var r=a;a=[],r.forEach(e),t=a}var n=function(){var r=t;t=[],r.forEach(e)},i=function(){return Promise.resolve().then(n)};i(),a={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),a}}}}).options=ri({async:!0,ssr:!1},r),i),rm=function(){},rh=c.forwardRef(function(e,t){var r,n,a,o,i=c.useRef(null),s=c.useState({onScrollCapture:rm,onWheelCapture:rm,onTouchMoveCapture:rm}),l=s[0],d=s[1],u=e.forwardProps,f=e.children,p=e.className,m=e.removeScrollBar,h=e.enabled,g=e.shards,y=e.sideCar,x=e.noRelative,v=e.noIsolation,w=e.inert,b=e.allowPinchZoom,j=e.as,k=e.gapMode,N=rs(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=(r=[i,t],n=function(e){return r.forEach(function(t){return rc(t,e)})},(a=(0,c.useState)(function(){return{value:null,callback:n,facade:{get current(){return a.value},set current(value){var e=a.value;e!==value&&(a.value=value,a.callback(value,e))}}}})[0]).callback=n,o=a.facade,ru(function(){var e=rf.get(o);if(e){var t=new Set(e),n=new Set(r),a=o.current;t.forEach(function(e){n.has(e)||rc(e,null)}),n.forEach(function(e){t.has(e)||rc(e,a)})}rf.set(o,r)},[r]),o),R=ri(ri({},N),l);return c.createElement(c.Fragment,null,h&&c.createElement(y,{sideCar:rp,removeScrollBar:m,shards:g,noRelative:x,noIsolation:v,inert:w,setCallbacks:d,allowPinchZoom:!!b,lockRef:i,gapMode:k}),u?c.cloneElement(c.Children.only(f),ri(ri({},R),{ref:E})):c.createElement(void 0===j?"div":j,ri({},R,{className:p,ref:E}),f))});rh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},rh.classNames={fullWidth:rd,zeroRight:rl};var rg=function(e){var t=e.sideCar,r=rs(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return c.createElement(n,ri({},r))};rg.isSideCarExport=!0;var ry=function(){var e=0,t=null;return{add:function(r){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=l||("u">typeof __webpack_nonce__?__webpack_nonce__:void 0);return t&&e.setAttribute("nonce",t),e}())){var n,a;(n=t).styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r)),a=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(a)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},rx=function(){var e=ry();return function(t,r){c.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},rv=function(){var e=rx();return function(t){return e(t.styles,t.dynamic),null}},rw={left:0,top:0,right:0,gap:0},rb=function(e){return parseInt(e||"",10)||0},rj=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[rb(r),rb(n),rb(a)]},rk=function(e){if(void 0===e&&(e="margin"),"u"<typeof window)return rw;var t=rj(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},rN=rv(),rE="data-scroll-locked",rR=function(e,t,r,n){var a=e.left,o=e.top,i=e.right,s=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(s,"px ").concat(n,";\n  }\n  body[").concat(rE,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(rl," {\n    right: ").concat(s,"px ").concat(n,";\n  }\n  \n  .").concat(rd," {\n    margin-right: ").concat(s,"px ").concat(n,";\n  }\n  \n  .").concat(rl," .").concat(rl," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(rd," .").concat(rd," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(rE,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},rC=function(){var e=parseInt(document.body.getAttribute(rE)||"0",10);return isFinite(e)?e:0},rS=function(){c.useEffect(function(){return document.body.setAttribute(rE,(rC()+1).toString()),function(){var e=rC()-1;e<=0?document.body.removeAttribute(rE):document.body.setAttribute(rE,e.toString())}},[])},rM=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=void 0===n?"margin":n;rS();var o=c.useMemo(function(){return rk(a)},[a]);return c.createElement(rN,{styles:rR(o,!t,a,r?"":"!important")})},rP=!1;if("u">typeof window)try{var rA=Object.defineProperty({},"passive",{get:function(){return rP=!0,!0}});window.addEventListener("test",rA,rA),window.removeEventListener("test",rA,rA)}catch(e){rP=!1}var rD=!!rP&&{passive:!1},rT=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return"hidden"!==r[t]&&(r.overflowY!==r.overflowX||"TEXTAREA"===e.tagName||"visible"!==r[t])},rI=function(e,t){var r=t.ownerDocument,n=t;do{if("u">typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),rF(e,n)){var a=rL(e,n);if(a[1]>a[2])return!0}n=n.parentNode}while(n&&n!==r.body)return!1},rF=function(e,t){return"v"===e?rT(t,"overflowY"):rT(t,"overflowX")},rL=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},rO=function(e,t,r,n,a){var o,i=(o=window.getComputedStyle(t).direction,"h"===e&&"rtl"===o?-1:1),s=i*n,l=r.target,d=t.contains(l),c=!1,u=s>0,f=0,p=0;do{if(!l)break;var m=rL(e,l),h=m[0],g=m[1]-m[2]-i*h;(h||g)&&rF(e,l)&&(f+=g,p+=h);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!d&&l!==document.body||d&&(t.contains(l)||t===l))return u&&(a&&1>Math.abs(f)||!a&&s>f)?c=!0:!u&&(a&&1>Math.abs(p)||!a&&-s>p)&&(c=!0),c},r_=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rH=function(e){return[e.deltaX,e.deltaY]},rz=function(e){return e&&"current"in e?e.current:e},rB=0,r$=[];let rW=(s=function(e){var t=c.useRef([]),r=c.useRef([0,0]),n=c.useRef(),a=c.useState(rB++)[0],o=c.useState(rv)[0],i=c.useRef(e);c.useEffect(function(){i.current=e},[e]),c.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=(function(e,t,r){if(r||2==arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))})([e.lockRef.current],(e.shards||[]).map(rz),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=c.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var a,o=r_(e),s=r.current,l="deltaX"in e?e.deltaX:s[0]-o[0],d="deltaY"in e?e.deltaY:s[1]-o[1],c=e.target,u=Math.abs(l)>Math.abs(d)?"h":"v";if("touches"in e&&"h"===u&&"range"===c.type)return!1;var f=window.getSelection(),p=f&&f.anchorNode;if(p&&(p===c||p.contains(c)))return!1;var m=rI(u,c);if(!m)return!0;if(m?a=u:(a="v"===u?"h":"v",m=rI(u,c)),!m)return!1;if(!n.current&&"changedTouches"in e&&(l||d)&&(n.current=a),!a)return!0;var h=n.current||a;return rO(h,t,e,"h"===h?l:d,!0)},[]),l=c.useCallback(function(e){if(r$.length&&r$[r$.length-1]===o){var r="deltaY"in e?rH(e):r_(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta,n[0]===r[0]&&n[1]===r[1])})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var a=(i.current.shards||[]).map(rz).filter(Boolean).filter(function(t){return t.contains(e.target)});(a.length>0?s(e,a[0]):!i.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),d=c.useCallback(function(e,r,n,a){var o={name:e,delta:r,target:n,should:a,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),u=c.useCallback(function(e){r.current=r_(e),n.current=void 0},[]),f=c.useCallback(function(t){d(t.type,rH(t),t.target,s(t,e.lockRef.current))},[]),p=c.useCallback(function(t){d(t.type,r_(t),t.target,s(t,e.lockRef.current))},[]);c.useEffect(function(){return r$.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",l,rD),document.addEventListener("touchmove",l,rD),document.addEventListener("touchstart",u,rD),function(){r$=r$.filter(function(e){return e!==o}),document.removeEventListener("wheel",l,rD),document.removeEventListener("touchmove",l,rD),document.removeEventListener("touchstart",u,rD)}},[]);var m=e.removeScrollBar,h=e.inert;return c.createElement(c.Fragment,null,h?c.createElement(o,{styles:"\n  .block-interactivity-".concat(a," {pointer-events: none;}\n  .allow-interactivity-").concat(a," {pointer-events: all;}\n")}):null,m?c.createElement(rM,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},rp.useMedium(s),rg);var rK=c.forwardRef(function(e,t){return c.createElement(rh,ri({},e,{ref:t,sideCar:rW}))});rK.classNames=rh.classNames;var rV=["Enter"," "],rU=["ArrowUp","PageDown","End"],rG=["ArrowDown","PageUp","Home",...rU],rX={ltr:[...rV,"ArrowRight"],rtl:[...rV,"ArrowLeft"]},rq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rY="Menu",[rZ,rJ,rQ]=(0,V.createCollection)(rY),[r0,r1]=(0,$.createContextScope)(rY,[rQ,tS,tQ]),r2=tS(),r5=tQ(),[r4,r3]=r0(rY),[r8,r9]=r0(rY),r6=e=>{let{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:o,modal:i=!0}=e,s=r2(t),[l,u]=c.useState(null),f=c.useRef(!1),p=(0,J.useCallbackRef)(o),m=G(a);return c.useEffect(()=>{let e=()=>{f.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>f.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,d.jsx)(tA,{...s,children:(0,d.jsx)(r4,{scope:t,open:r,onOpenChange:p,content:l,onContentChange:u,children:(0,d.jsx)(r8,{scope:t,onClose:c.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:f,dir:m,modal:i,children:n})})})};r6.displayName=rY;var r7=c.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,a=r2(r);return(0,d.jsx)(tT,{...a,...n,ref:t})});r7.displayName="MenuAnchor";var ne="MenuPortal",[nt,nr]=r0(ne,{forceMount:void 0}),nn=e=>{let{__scopeMenu:t,forceMount:r,children:n,container:a}=e,o=r3(ne,t);return(0,d.jsx)(nt,{scope:t,forceMount:r,children:(0,d.jsx)(tV.Presence,{present:r||o.open,children:(0,d.jsx)(tK.Portal,{asChild:!0,container:a,children:n})})})};nn.displayName=ne;var na="MenuContent",[no,ni]=r0(na),ns=c.forwardRef((e,t)=>{let r=nr(na,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,o=r3(na,e.__scopeMenu),i=r9(na,e.__scopeMenu);return(0,d.jsx)(rZ.Provider,{scope:e.__scopeMenu,children:(0,d.jsx)(tV.Presence,{present:n||o.open,children:(0,d.jsx)(rZ.Slot,{scope:e.__scopeMenu,children:i.modal?(0,d.jsx)(nl,{...a,ref:t}):(0,d.jsx)(nd,{...a,ref:t})})})})}),nl=c.forwardRef((e,t)=>{let r=r3(na,e.__scopeMenu),n=c.useRef(null),a=(0,B.useComposedRefs)(t,n);return c.useEffect(()=>{let e=n.current;if(e)return ro(e)},[]),(0,d.jsx)(nu,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:(0,z.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),nd=c.forwardRef((e,t)=>{let r=r3(na,e.__scopeMenu);return(0,d.jsx)(nu,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),nc=(0,t6.createSlot)("MenuContent.ScrollLock"),nu=c.forwardRef((e,t)=>{let{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:m,onDismiss:h,disableOutsideScroll:g,...y}=e,x=r3(na,r),v=r9(na,r),w=r2(r),b=r5(r),j=rJ(r),[k,N]=c.useState(null),E=c.useRef(null),R=(0,B.useComposedRefs)(t,E,x.onContentChange),C=c.useRef(0),S=c.useRef(""),M=c.useRef(0),P=c.useRef(null),A=c.useRef("right"),D=c.useRef(0),T=g?rK:c.Fragment;c.useEffect(()=>()=>window.clearTimeout(C.current),[]),Y();let I=c.useCallback(e=>{var t,r;return A.current===P.current?.side&&(t=e,!!(r=P.current?.area)&&function(e,t){let{x:r,y:n}=e,a=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let i=t[e],s=t[o],l=i.x,d=i.y,c=s.x,u=s.y;d>n!=u>n&&r<(c-l)*(n-d)/(u-d)+l&&(a=!a)}return a}({x:t.clientX,y:t.clientY},r))},[]);return(0,d.jsx)(no,{scope:r,searchRef:S,onItemEnter:c.useCallback(e=>{I(e)&&e.preventDefault()},[I]),onItemLeave:c.useCallback(e=>{I(e)||(E.current?.focus(),N(null))},[I]),onTriggerLeave:c.useCallback(e=>{I(e)&&e.preventDefault()},[I]),pointerGraceTimerRef:M,onPointerGraceIntentChange:c.useCallback(e=>{P.current=e},[]),children:(0,d.jsx)(T,{...g?{as:nc,allowPinchZoom:!0}:void 0,children:(0,d.jsx)(er,{asChild:!0,trapped:a,onMountAutoFocus:(0,z.composeEventHandlers)(o,e=>{e.preventDefault(),E.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:(0,d.jsx)(X.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:m,onDismiss:h,children:(0,d.jsx)(t2,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:N,onEntryFocus:(0,z.composeEventHandlers)(l,e=>{v.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,d.jsx)(tO,{role:"menu","aria-orientation":"vertical","data-state":nO(x.open),"data-radix-menu-content":"",dir:v.dir,...w,...y,ref:R,style:{outline:"none",...y.style},onKeyDown:(0,z.composeEventHandlers)(y.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,r=e.ctrlKey||e.altKey||e.metaKey,n=1===e.key.length;if(t){var a;let t,o,i,s,l,d;"Tab"===e.key&&e.preventDefault(),!r&&n&&(a=e.key,t=S.current+a,o=j().filter(e=>!e.disabled),i=document.activeElement,s=o.find(e=>e.ref.current===i)?.textValue,l=function(e,t,r){var n;let a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=r?e.indexOf(r):-1,i=(n=Math.max(o,0),e.map((t,r)=>e[(n+r)%e.length]));1===a.length&&(i=i.filter(e=>e!==r));let s=i.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return s!==r?s:void 0}(o.map(e=>e.textValue),t,s),d=o.find(e=>e.textValue===l)?.ref.current,function e(t){S.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(()=>e(""),1e3))}(t),d&&setTimeout(()=>d.focus()))}let o=E.current;if(e.target!==o||!rG.includes(e.key))return;e.preventDefault();let i=j().filter(e=>!e.disabled).map(e=>e.ref.current);rU.includes(e.key)&&i.reverse(),function(e){let t=document.activeElement;for(let r of e)if(r===t||(r.focus(),document.activeElement!==t))return}(i)}),onBlur:(0,z.composeEventHandlers)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),S.current="")}),onPointerMove:(0,z.composeEventHandlers)(e.onPointerMove,nz(e=>{let t=e.target,r=D.current!==e.clientX;e.currentTarget.contains(t)&&r&&(A.current=e.clientX>D.current?"right":"left",D.current=e.clientX)}))})})})})})})});ns.displayName=na;var nf=c.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,d.jsx)(K.Primitive.div,{role:"group",...n,ref:t})});nf.displayName="MenuGroup";var np=c.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,d.jsx)(K.Primitive.div,{...n,ref:t})});np.displayName="MenuLabel";var nm="MenuItem",nh="menu.itemSelect",ng=c.forwardRef((e,t)=>{let{disabled:r=!1,onSelect:n,...a}=e,o=c.useRef(null),i=r9(nm,e.__scopeMenu),s=ni(nm,e.__scopeMenu),l=(0,B.useComposedRefs)(t,o),u=c.useRef(!1);return(0,d.jsx)(ny,{...a,ref:l,disabled:r,onClick:(0,z.composeEventHandlers)(e.onClick,()=>{let e=o.current;if(!r&&e){let t=new CustomEvent(nh,{bubbles:!0,cancelable:!0});e.addEventListener(nh,e=>n?.(e),{once:!0}),(0,K.dispatchDiscreteCustomEvent)(e,t),t.defaultPrevented?u.current=!1:i.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),u.current=!0},onPointerUp:(0,z.composeEventHandlers)(e.onPointerUp,e=>{u.current||e.currentTarget?.click()}),onKeyDown:(0,z.composeEventHandlers)(e.onKeyDown,e=>{let t=""!==s.searchRef.current;r||t&&" "===e.key||rV.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});ng.displayName=nm;var ny=c.forwardRef((e,t)=>{let{__scopeMenu:r,disabled:n=!1,textValue:a,...o}=e,i=ni(nm,r),s=r5(r),l=c.useRef(null),u=(0,B.useComposedRefs)(t,l),[f,p]=c.useState(!1),[m,h]=c.useState("");return c.useEffect(()=>{let e=l.current;e&&h((e.textContent??"").trim())},[o.children]),(0,d.jsx)(rZ.ItemSlot,{scope:r,disabled:n,textValue:a??m,children:(0,d.jsx)(t3,{asChild:!0,...s,focusable:!n,children:(0,d.jsx)(K.Primitive.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:(0,z.composeEventHandlers)(e.onPointerMove,nz(e=>{n?i.onItemLeave(e):(i.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,z.composeEventHandlers)(e.onPointerLeave,nz(e=>i.onItemLeave(e))),onFocus:(0,z.composeEventHandlers)(e.onFocus,()=>p(!0)),onBlur:(0,z.composeEventHandlers)(e.onBlur,()=>p(!1))})})})}),nx=c.forwardRef((e,t)=>{let{checked:r=!1,onCheckedChange:n,...a}=e;return(0,d.jsx)(nR,{scope:e.__scopeMenu,checked:r,children:(0,d.jsx)(ng,{role:"menuitemcheckbox","aria-checked":n_(r)?"mixed":r,...a,ref:t,"data-state":nH(r),onSelect:(0,z.composeEventHandlers)(a.onSelect,()=>n?.(!!n_(r)||!r),{checkForDefaultPrevented:!1})})})});nx.displayName="MenuCheckboxItem";var nv="MenuRadioGroup",[nw,nb]=r0(nv,{value:void 0,onValueChange:()=>{}}),nj=c.forwardRef((e,t)=>{let{value:r,onValueChange:n,...a}=e,o=(0,J.useCallbackRef)(n);return(0,d.jsx)(nw,{scope:e.__scopeMenu,value:r,onValueChange:o,children:(0,d.jsx)(nf,{...a,ref:t})})});nj.displayName=nv;var nk="MenuRadioItem",nN=c.forwardRef((e,t)=>{let{value:r,...n}=e,a=nb(nk,e.__scopeMenu),o=r===a.value;return(0,d.jsx)(nR,{scope:e.__scopeMenu,checked:o,children:(0,d.jsx)(ng,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":nH(o),onSelect:(0,z.composeEventHandlers)(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});nN.displayName=nk;var nE="MenuItemIndicator",[nR,nC]=r0(nE,{checked:!1}),nS=c.forwardRef((e,t)=>{let{__scopeMenu:r,forceMount:n,...a}=e,o=nC(nE,r);return(0,d.jsx)(tV.Presence,{present:n||n_(o.checked)||!0===o.checked,children:(0,d.jsx)(K.Primitive.span,{...a,ref:t,"data-state":nH(o.checked)})})});nS.displayName=nE;var nM=c.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e;return(0,d.jsx)(K.Primitive.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});nM.displayName="MenuSeparator";var nP=c.forwardRef((e,t)=>{let{__scopeMenu:r,...n}=e,a=r2(r);return(0,d.jsx)(tz,{...a,...n,ref:t})});nP.displayName="MenuArrow";var[nA,nD]=r0("MenuSub"),nT="MenuSubTrigger",nI=c.forwardRef((e,t)=>{let r=r3(nT,e.__scopeMenu),n=r9(nT,e.__scopeMenu),a=nD(nT,e.__scopeMenu),o=ni(nT,e.__scopeMenu),i=c.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=o,u={__scopeMenu:e.__scopeMenu},f=c.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return c.useEffect(()=>f,[f]),c.useEffect(()=>{let e=s.current;return()=>{window.clearTimeout(e),l(null)}},[s,l]),(0,d.jsx)(r7,{asChild:!0,...u,children:(0,d.jsx)(ny,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":nO(r.open),...e,ref:(0,B.composeRefs)(t,a.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:(0,z.composeEventHandlers)(e.onPointerMove,nz(t=>{o.onItemEnter(t),!t.defaultPrevented&&(e.disabled||r.open||i.current||(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{r.onOpenChange(!0),f()},100)))})),onPointerLeave:(0,z.composeEventHandlers)(e.onPointerLeave,nz(e=>{f();let t=r.content?.getBoundingClientRect();if(t){let n=r.content?.dataset.side,a="right"===n,i=t[a?"left":"right"],l=t[a?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+(a?-5:5),y:e.clientY},{x:i,y:t.top},{x:l,y:t.top},{x:l,y:t.bottom},{x:i,y:t.bottom}],side:n}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:(0,z.composeEventHandlers)(e.onKeyDown,t=>{let a=""!==o.searchRef.current;e.disabled||a&&" "===t.key||rX[n.dir].includes(t.key)&&(r.onOpenChange(!0),r.content?.focus(),t.preventDefault())})})})});nI.displayName=nT;var nF="MenuSubContent",nL=c.forwardRef((e,t)=>{let r=nr(na,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,o=r3(na,e.__scopeMenu),i=r9(na,e.__scopeMenu),s=nD(nF,e.__scopeMenu),l=c.useRef(null),u=(0,B.useComposedRefs)(t,l);return(0,d.jsx)(rZ.Provider,{scope:e.__scopeMenu,children:(0,d.jsx)(tV.Presence,{present:n||o.open,children:(0,d.jsx)(rZ.Slot,{scope:e.__scopeMenu,children:(0,d.jsx)(nu,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:u,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{i.isUsingKeyboardRef.current&&l.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,z.composeEventHandlers)(e.onFocusOutside,e=>{e.target!==s.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:(0,z.composeEventHandlers)(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:(0,z.composeEventHandlers)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),r=rq[i.dir].includes(e.key);t&&r&&(o.onOpenChange(!1),s.trigger?.focus(),e.preventDefault())})})})})})});function nO(e){return e?"open":"closed"}function n_(e){return"indeterminate"===e}function nH(e){return n_(e)?"indeterminate":e?"checked":"unchecked"}function nz(e){return t=>"mouse"===t.pointerType?e(t):void 0}nL.displayName=nF;var nB="DropdownMenu",[n$,nW]=(0,$.createContextScope)(nB,[r1]),nK=r1(),[nV,nU]=n$(nB),nG=e=>{let{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:o,onOpenChange:i,modal:s=!0}=e,l=nK(t),u=c.useRef(null),[f,p]=(0,W.useControllableState)({prop:a,defaultProp:o??!1,onChange:i,caller:nB});return(0,d.jsx)(nV,{scope:t,triggerId:eu(),triggerRef:u,contentId:eu(),open:f,onOpenChange:p,onOpenToggle:c.useCallback(()=>p(e=>!e),[p]),modal:s,children:(0,d.jsx)(r6,{...l,open:f,onOpenChange:p,dir:n,modal:s,children:r})})};nG.displayName=nB;var nX="DropdownMenuTrigger",nq=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,o=nU(nX,r),i=nK(r);return(0,d.jsx)(r7,{asChild:!0,...i,children:(0,d.jsx)(K.Primitive.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:(0,B.composeRefs)(t,o.triggerRef),onPointerDown:(0,z.composeEventHandlers)(e.onPointerDown,e=>{!n&&0===e.button&&!1===e.ctrlKey&&(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:(0,z.composeEventHandlers)(e.onKeyDown,e=>{!n&&(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});nq.displayName=nX;var nY=e=>{let{__scopeDropdownMenu:t,...r}=e,n=nK(t);return(0,d.jsx)(nn,{...n,...r})};nY.displayName="DropdownMenuPortal";var nZ="DropdownMenuContent",nJ=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nU(nZ,r),o=nK(r),i=c.useRef(!1);return(0,d.jsx)(ns,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...n,ref:t,onCloseAutoFocus:(0,z.composeEventHandlers)(e.onCloseAutoFocus,e=>{i.current||a.triggerRef.current?.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:(0,z.composeEventHandlers)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;(!a.modal||n)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});nJ.displayName=nZ,c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nf,{...a,...n,ref:t})}).displayName="DropdownMenuGroup";var nQ=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(np,{...a,...n,ref:t})});nQ.displayName="DropdownMenuLabel";var n0=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(ng,{...a,...n,ref:t})});n0.displayName="DropdownMenuItem";var n1=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nx,{...a,...n,ref:t})});n1.displayName="DropdownMenuCheckboxItem",c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nj,{...a,...n,ref:t})}).displayName="DropdownMenuRadioGroup";var n2=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nN,{...a,...n,ref:t})});n2.displayName="DropdownMenuRadioItem";var n5=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nS,{...a,...n,ref:t})});n5.displayName="DropdownMenuItemIndicator";var n4=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nM,{...a,...n,ref:t})});n4.displayName="DropdownMenuSeparator",c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nP,{...a,...n,ref:t})}).displayName="DropdownMenuArrow";var n3=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nI,{...a,...n,ref:t})});n3.displayName="DropdownMenuSubTrigger";var n8=c.forwardRef((e,t)=>{let{__scopeDropdownMenu:r,...n}=e,a=nK(r);return(0,d.jsx)(nL,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});n8.displayName="DropdownMenuSubContent";let n9=(0,f.default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),n6=(0,f.default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),n7=(0,f.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var ae=e.i(52088);c.forwardRef(({className:e,inset:t,children:r,...n},a)=>(0,d.jsxs)(n3,{ref:a,className:(0,ae.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,(0,d.jsx)(n6,{className:"ml-auto h-4 w-4"})]})).displayName=n3.displayName,c.forwardRef(({className:e,...t},r)=>(0,d.jsx)(n8,{ref:r,className:(0,ae.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=n8.displayName;let at=c.forwardRef(({className:e,sideOffset:t=4,...r},n)=>(0,d.jsx)(nY,{children:(0,d.jsx)(nJ,{ref:n,sideOffset:t,className:(0,ae.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));at.displayName=nJ.displayName;let ar=c.forwardRef(({className:e,inset:t,...r},n)=>(0,d.jsx)(n0,{ref:n,className:(0,ae.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));ar.displayName=n0.displayName,c.forwardRef(({className:e,children:t,checked:r,...n},a)=>(0,d.jsxs)(n1,{ref:a,className:(0,ae.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(n5,{children:(0,d.jsx)(n9,{className:"h-4 w-4"})})}),t]})).displayName=n1.displayName,c.forwardRef(({className:e,children:t,...r},n)=>(0,d.jsxs)(n2,{ref:n,className:(0,ae.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(n5,{children:(0,d.jsx)(n7,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=n2.displayName,c.forwardRef(({className:e,inset:t,...r},n)=>(0,d.jsx)(nQ,{ref:n,className:(0,ae.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r})).displayName=nQ.displayName;let an=c.forwardRef(({className:e,...t},r)=>(0,d.jsx)(n4,{ref:r,className:(0,ae.cn)("-mx-1 my-1 h-px bg-muted",e),...t}));function aa({messageId:e,chatId:t,content:r,isOwn:n,isEdited:a,createdAt:o,onEdit:i,onDelete:s,onReply:l,onForward:u,align:f="end",side:p="bottom",open:m,onOpenChange:h}){let[g,y]=(0,c.useState)(!1),{toast:x}=(0,R.useToast)(),w=void 0!==m&&h,b=w?m:g,j=w?h:y,N=new Date().getTime()-new Date(o).getTime(),E=n&&N<864e5;return(0,d.jsxs)(nG,{open:b,onOpenChange:j,children:[(0,d.jsx)(nq,{asChild:!0,children:(0,d.jsxs)(k.Button,{variant:"ghost",size:"sm",className:`h-6 w-6 p-0 transition-opacity hover:bg-blue-500 dark:hover:bg-blue-500 ${b?"opacity-100":"opacity-0 group-hover:opacity-100"}`,children:[(0,d.jsx)(v,{className:"h-3 w-3"}),(0,d.jsx)("span",{className:"sr-only",children:"Message options"})]})}),(0,d.jsxs)(at,{align:f,side:p,sideOffset:8,className:"w-44 rounded-xl border border-gray-200 bg-white p-1.5 text-gray-800 shadow-xl dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100",children:[(0,d.jsxs)(ar,{onClick:()=>{l(e),j(!1)},className:"text-sm focus:bg-gray-100 focus:text-gray-900 dark:focus:bg-gray-700 dark:focus:text-gray-50",children:[(0,d.jsx)(O,{className:"mr-2 h-4 w-4"}),"Reply"]}),(0,d.jsxs)(ar,{onClick:()=>{navigator.clipboard.writeText(r),x({variant:"success",title:"Copied",description:"Message copied to clipboard."}),j(!1)},className:"text-sm focus:bg-gray-100 focus:text-gray-900 dark:focus:bg-gray-700 dark:focus:text-gray-50",children:[(0,d.jsx)(_,{className:"mr-2 h-4 w-4"}),"Copy"]}),(0,d.jsxs)(ar,{onClick:()=>{u(e),j(!1)},className:"text-sm focus:bg-gray-100 focus:text-gray-900 dark:focus:bg-gray-700 dark:focus:text-gray-50",children:[(0,d.jsx)(H,{className:"mr-2 h-4 w-4"}),"Forward"]}),n&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(an,{}),E&&(0,d.jsxs)(ar,{onClick:()=>{i(e,r),j(!1)},className:"text-sm focus:bg-gray-100 focus:text-gray-900 dark:focus:bg-gray-700 dark:focus:text-gray-50",children:[(0,d.jsx)(F,{className:"mr-2 h-4 w-4"}),"Edit",a&&(0,d.jsx)("span",{className:"ml-auto text-xs text-gray-500",children:"(edited)"})]}),(0,d.jsxs)(ar,{onClick:()=>{s(e),j(!1)},className:"text-sm text-red-600 dark:text-red-400 focus:text-red-600 focus:bg-red-50 dark:focus:bg-red-900/20",children:[(0,d.jsx)(L,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}an.displayName=n4.displayName;var ao="Dialog",[ai,as]=(0,$.createContextScope)(ao),[al,ad]=ai(ao),ac=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:i=!0}=e,s=c.useRef(null),l=c.useRef(null),[u,f]=(0,W.useControllableState)({prop:n,defaultProp:a??!1,onChange:o,caller:ao});return(0,d.jsx)(al,{scope:t,triggerRef:s,contentRef:l,contentId:eu(),titleId:eu(),descriptionId:eu(),open:u,onOpenChange:f,onOpenToggle:c.useCallback(()=>f(e=>!e),[f]),modal:i,children:r})};ac.displayName=ao;var au="DialogTrigger";c.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=ad(au,r),o=(0,B.useComposedRefs)(t,a.triggerRef);return(0,d.jsx)(K.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":aA(a.open),...n,ref:o,onClick:(0,z.composeEventHandlers)(e.onClick,a.onOpenToggle)})}).displayName=au;var af="DialogPortal",[ap,am]=ai(af,{forceMount:void 0}),ah=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:a}=e,o=ad(af,t);return(0,d.jsx)(ap,{scope:t,forceMount:r,children:c.Children.map(n,e=>(0,d.jsx)(tV.Presence,{present:r||o.open,children:(0,d.jsx)(tK.Portal,{asChild:!0,container:a,children:e})}))})};ah.displayName=af;var ag="DialogOverlay",ay=c.forwardRef((e,t)=>{let r=am(ag,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=ad(ag,e.__scopeDialog);return o.modal?(0,d.jsx)(tV.Presence,{present:n||o.open,children:(0,d.jsx)(av,{...a,ref:t})}):null});ay.displayName=ag;var ax=(0,t6.createSlot)("DialogOverlay.RemoveScroll"),av=c.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=ad(ag,r);return(0,d.jsx)(rK,{as:ax,allowPinchZoom:!0,shards:[a.contentRef],children:(0,d.jsx)(K.Primitive.div,{"data-state":aA(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),aw="DialogContent",ab=c.forwardRef((e,t)=>{let r=am(aw,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=ad(aw,e.__scopeDialog);return(0,d.jsx)(tV.Presence,{present:n||o.open,children:o.modal?(0,d.jsx)(aj,{...a,ref:t}):(0,d.jsx)(ak,{...a,ref:t})})});ab.displayName=aw;var aj=c.forwardRef((e,t)=>{let r=ad(aw,e.__scopeDialog),n=c.useRef(null),a=(0,B.useComposedRefs)(t,r.contentRef,n);return c.useEffect(()=>{let e=n.current;if(e)return ro(e)},[]),(0,d.jsx)(aN,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,z.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:(0,z.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:(0,z.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),ak=c.forwardRef((e,t)=>{let r=ad(aw,e.__scopeDialog),n=c.useRef(!1),a=c.useRef(!1);return(0,d.jsx)(aN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||r.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));let o=t.target;r.triggerRef.current?.contains(o)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}})}),aN=c.forwardRef((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...i}=e,s=ad(aw,r),l=c.useRef(null),u=(0,B.useComposedRefs)(t,l);return Y(),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(er,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o,children:(0,d.jsx)(X.DismissableLayer,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":aA(s.open),...i,ref:u,onDismiss:()=>s.onOpenChange(!1)})}),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(aF,{titleId:s.titleId}),(0,d.jsx)(aL,{contentRef:l,descriptionId:s.descriptionId})]})]})}),aE="DialogTitle",aR=c.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=ad(aE,r);return(0,d.jsx)(K.Primitive.h2,{id:a.titleId,...n,ref:t})});aR.displayName=aE;var aC="DialogDescription",aS=c.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=ad(aC,r);return(0,d.jsx)(K.Primitive.p,{id:a.descriptionId,...n,ref:t})});aS.displayName=aC;var aM="DialogClose",aP=c.forwardRef((e,t)=>{let{__scopeDialog:r,...n}=e,a=ad(aM,r);return(0,d.jsx)(K.Primitive.button,{type:"button",...n,ref:t,onClick:(0,z.composeEventHandlers)(e.onClick,()=>a.onOpenChange(!1))})});function aA(e){return e?"open":"closed"}aP.displayName=aM;var aD="DialogTitleWarning",[aT,aI]=(0,$.createContext)(aD,{contentName:aw,titleName:aE,docsSlug:"dialog"}),aF=({titleId:e})=>{let t=aI(aD),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return c.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},aL=({contentRef:e,descriptionId:t})=>{let r=aI("DialogDescriptionWarning"),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r.contentName}}.`;return c.useEffect(()=>{let r=e.current?.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null};let aO=c.forwardRef(({className:e,...t},r)=>(0,d.jsx)(ay,{ref:r,className:(0,ae.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));aO.displayName=ay.displayName;let a_=c.forwardRef(({className:e,children:t,...r},n)=>(0,d.jsxs)(ah,{children:[(0,d.jsx)(aO,{}),(0,d.jsxs)(ab,{ref:n,className:(0,ae.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,d.jsxs)(aP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(M.X,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));a_.displayName=ab.displayName;let aH=({className:e,...t})=>(0,d.jsx)("div",{className:(0,ae.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});aH.displayName="DialogHeader";let az=({className:e,...t})=>(0,d.jsx)("div",{className:(0,ae.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});az.displayName="DialogFooter";let aB=c.forwardRef(({className:e,...t},r)=>(0,d.jsx)(aR,{ref:r,className:(0,ae.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));aB.displayName=aR.displayName,c.forwardRef(({className:e,...t},r)=>(0,d.jsx)(aS,{ref:r,className:(0,ae.cn)("text-sm text-muted-foreground",e),...t})).displayName=aS.displayName;let a$=c.forwardRef(({className:e,...t},r)=>(0,d.jsx)("textarea",{className:(0,ae.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));function aW({isOpen:e,messageId:t,initialContent:r,isLoading:n,onClose:a,onSave:o}){let[i,s]=(0,c.useState)(r),l=async()=>{i.trim()&&i!==r&&await o(t,i.trim()),a()},u=()=>{s(r),a()};return(0,d.jsx)(ac,{open:e,onOpenChange:u,children:(0,d.jsxs)(a_,{className:"sm:max-w-md",children:[(0,d.jsx)(aH,{children:(0,d.jsx)(aB,{children:"Edit Message"})}),(0,d.jsx)("div",{className:"space-y-4",children:(0,d.jsx)(a$,{value:i,onChange:e=>s(e.target.value),placeholder:"Type your message...",className:"min-h-[100px] resize-none",autoFocus:!0,disabled:n})}),(0,d.jsxs)(az,{children:[(0,d.jsx)(k.Button,{variant:"outline",onClick:u,disabled:n,children:"Cancel"}),(0,d.jsx)(k.Button,{onClick:l,disabled:n||!i.trim()||i===r,children:n?"Saving...":"Save Changes"})]})]})})}a$.displayName="Textarea";var aK=e.i(85458),aV=e.i(12437);function aU({params:e}){let[t,r]=(0,c.useState)(""),[n,a]=(0,c.useState)([]),[o,i]=(0,c.useState)(""),[s,l]=(0,c.useState)(null),[f,S]=(0,c.useState)(!0),[M,A]=(0,c.useState)([]),[D,T]=(0,c.useState)(!1),[F,L]=(0,c.useState)(null),[O,_]=(0,c.useState)(!1),[H,z]=(0,c.useState)(null),[B,$]=(0,c.useState)({}),[W,K]=(0,c.useState)(new Set),[V,U]=(0,c.useState)({}),G=(0,c.useRef)(null),X=(0,c.useRef)(null),[q,Y]=(0,c.useState)(null),[Z,J]=(0,c.useState)(null),Q=(0,c.useRef)(null),[ee,et]=(0,c.useState)(null),[er,en]=(0,c.useState)([]),[ea,eo]=(0,c.useState)(""),[ei,es]=(0,c.useState)(!1),[el,ed]=(0,c.useState)(""),[ec,eu]=(0,c.useState)(new Set),{user:ef}=(0,j.useAuthStore)(),{isConnected:ep,on:em,off:eh,joinChat:eg,sendMessage:ey,startTyping:ex,stopTyping:ev}=(0,E.useSocket)(),{toast:ew}=(0,R.useToast)(),eb=(0,u.useRouter)();(0,c.useEffect)(()=>{e.then(e=>{r(e.chatId)})},[e]),(0,c.useEffect)(()=>{t&&(async()=>{try{let[e,r]=await Promise.all([C.chatAPI.getChatDetails(t),C.chatAPI.getChatMessages(t)]);if(e.success){l(e.data);let t=Object.fromEntries(e.data.participants.map(e=>[e.user.id,e.user.status]));U(t)}r.success&&a(r.data)}catch(e){console.error("Error loading chat data:",e)}finally{S(!1)}})()},[t]),(0,c.useEffect)(()=>{if(ep&&t)return eg(t),em("new-message",({message:e})=>{if(e.chatId===t){a(t=>[...t,e]);let t=eI(e.metadata);t?.forwardedFrom&&(J(e.id),Q.current&&window.clearTimeout(Q.current),Q.current=window.setTimeout(()=>{J(null)},900))}}),em("user-typing",({userId:e,username:t})=>{e!==ef?.id&&A(r=>r.some(t=>t.userId===e)?r:[...r,{userId:e,username:t}])}),em("user-stopped-typing",({userId:e})=>{e!==ef?.id&&A(t=>t.filter(t=>t.userId!==e))}),em("user-status-changed",({userId:e,status:t})=>{U(r=>({...r,[e]:t}))}),em("message-edited",({message:e})=>{e.chatId===t&&a(t=>t.map(t=>t.id===e.id?{...t,content:e.content,isEdited:!0,updatedAt:e.updatedAt}:t))}),em("message-deleted",({messageId:e,chatId:r})=>{r===t&&a(t=>t.map(t=>t.id===e?{...t,content:"[Message deleted]",isDeleted:!0}:t))}),em("messages-read",({messageIds:e,chatId:r})=>{r===t&&K(t=>{let r=new Set(t);return e.forEach(e=>r.delete(e)),r})}),em("reaction-added",({messageId:e,reaction:t})=>{t?.user?.id!==ef?.id&&a(r=>r.map(r=>{if(r.id===e){let e=(r.reactions||[]).map(e=>({...e,users:e.users?[...e.users]:[]})),n=e.findIndex(e=>e.emoji===t.emoji);if(n>=0){let a=e[n];if(a.users.some(e=>e.id===t.user.id))return r;let o=[...a.users,{id:t.user.id,displayName:t.user.displayName}];e[n]={...a,users:o,count:o.length}}else e.push({emoji:t.emoji,count:1,users:[{id:t.user.id,displayName:t.user.displayName}],hasReacted:t.user.id===ef?.id});return{...r,reactions:e}}return r}))}),em("reaction-removed",({messageId:e,userId:t,emoji:r})=>{t!==ef?.id&&a(n=>n.map(n=>{if(n.id===e){let e=(n.reactions||[]).map(e=>({...e,users:e.users?[...e.users]:[]})),a=e.findIndex(e=>e.emoji===r);if(a>=0){let r=e[a],n=r.users.filter(e=>e.id!==t);0===n.length?e.splice(a,1):e[a]={...r,users:n,count:n.length,hasReacted:t!==ef?.id&&r.hasReacted}}return{...n,reactions:e}}return n}))}),()=>{eh("new-message"),eh("user-typing"),eh("user-stopped-typing"),eh("user-status-changed"),eh("message-edited"),eh("message-deleted"),eh("reaction-added"),eh("reaction-removed"),eh("messages-read")}},[ep,t,eg,em,eh,ef?.id]),(0,c.useEffect)(()=>{if(!n.length||!ef?.id)return;let e=n.filter(e=>e.senderId!==ef.id).map(e=>e.id);0===e.length||(async()=>{try{await C.messageStatusAPI.markAsRead(e);let r=n.reduce((e,t)=>e?new Date(t.createdAt).getTime()>new Date(e.createdAt).getTime()?t:e:t,null);r&&localStorage.setItem(`chat_read_${t}`,r.createdAt),K(new Set)}catch(e){console.error("Failed to mark messages read:",e)}})()},[n,ef?.id]),(0,c.useEffect)(()=>{G.current&&G.current.scrollIntoView({behavior:"auto"})},[n]);let ej=()=>{X.current&&(window.clearTimeout(X.current),X.current=null)},ek=async()=>{if(o.trim()&&ef)try{await C.chatAPI.sendMessage(t,{content:o.trim(),replyToId:H?.id}),i(""),z(null)}catch(e){console.error("Error sending message:",e),ew({variant:"destructive",title:"Error",description:e.response?.data?.error||"Failed to send message. Please try again."})}},eN=()=>{if(!s)return"Loading...";if("GROUP"===s.type||"CHANNEL"===s.type)return s.name||"Group Chat";let e=s.participants.find(e=>e.user.id!==ef?.id);return e?.user.displayName||"Private Chat"},eE=()=>{if(s?.avatar)return s.avatar;if(s?.type==="PRIVATE"){let e=s.participants.find(e=>e.user.id!==ef?.id);return e?.user.avatar}return null},eR=async(e,t)=>{try{let r=await C.reactionsAPI.addReaction(e,t);a(n=>n.map(n=>{if(n.id===e){let e=(n.reactions||[]).map(e=>({...e,users:e.users?[...e.users]:[]})),a=e.findIndex(e=>e.emoji===t);if("added"===r.action)if(a>=0){let t=e[a];if(t.users.some(e=>e.id===ef.id))return n;let r=[...t.users,{id:ef.id,displayName:ef.displayName}];e[a]={...t,users:r,count:r.length,hasReacted:!0}}else e.push({emoji:t,count:1,users:[{id:ef.id,displayName:ef.displayName}],hasReacted:!0});else if("removed"===r.action&&a>=0){let t=e[a],r=t.users.filter(e=>e.id!==ef.id);0===r.length?e.splice(a,1):e[a]={...t,users:r,count:r.length,hasReacted:!1}}return{...n,reactions:e}}return n}))}catch(e){console.error("Error adding reaction:",e),ew({variant:"destructive",title:"Error",description:e.response?.data?.error||"Failed to add reaction. Please try again."})}},eC=async(e,t)=>{try{await C.reactionsAPI.removeReaction(e,t),a(r=>r.map(r=>{if(r.id===e){let e=(r.reactions||[]).map(e=>({...e,users:e.users?[...e.users]:[]})),n=e.findIndex(e=>e.emoji===t);if(n>=0){let t=e[n],r=t.users.filter(e=>e.id!==ef.id);0===r.length?e.splice(n,1):e[n]={...t,users:r,count:r.length,hasReacted:!1}}return{...r,reactions:e}}return r}))}catch(e){console.error("Error removing reaction:",e),ew({variant:"destructive",title:"Error",description:e.response?.data?.error||"Failed to remove reaction. Please try again."})}},eS=(e,t)=>{L({id:e,content:t})},eM=async(e,r)=>{if(t){_(!0);try{await C.chatAPI.editMessage(t,e,{content:r}),a(t=>t.map(t=>t.id===e?{...t,content:r,isEdited:!0,updatedAt:new Date().toISOString()}:t)),L(null),ew({variant:"success",title:"Message edited",description:"Your message has been updated successfully."})}catch(e){console.error("Error editing message:",e),ew({variant:"destructive",title:"Error",description:e.response?.data?.error||"Failed to edit message. Please try again."})}finally{_(!1)}}},eP=async e=>{if(t)try{await C.chatAPI.deleteMessage(t,e),a(t=>t.map(t=>t.id===e?{...t,content:"[Message deleted]",isDeleted:!0}:t)),ew({variant:"success",title:"Message deleted",description:"The message has been deleted successfully."})}catch(e){console.error("Error deleting message:",e),ew({variant:"destructive",title:"Error",description:e.response?.data?.error||"Failed to delete message. Please try again."})}},eA=e=>{let t=n.find(t=>t.id===e);t&&z(t)},eD=e=>{let t=document.getElementById(`message-${e}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),J(e),Q.current&&window.clearTimeout(Q.current),Q.current=window.setTimeout(()=>{J(null)},900))},eT=e=>{if("GROUP"===e.type||"CHANNEL"===e.type)return e.name||"Group Chat";let t=e.participants.find(e=>e.user.id!==ef?.id);return t?.user.displayName||"Private Chat"},eI=e=>{if(e){if("string"==typeof e)try{return JSON.parse(e)}catch{return}if("object"==typeof e)return e}};(0,c.useEffect)(()=>{ee&&(async()=>{es(!0);try{let e=await C.chatAPI.getChats();e.success&&en(e.data)}catch(e){ew({variant:"destructive",title:"Error",description:"Failed to load chats for forwarding."})}finally{es(!1)}})()},[ee,ew]);let eF=e=>{let t=n.find(t=>t.id===e);t&&(et(t),eo(""),ed(""),eu(new Set))},eL=async()=>{if(ee&&0!==ec.size)try{let e={...eI(ee.metadata)||{},forwardedFrom:{chatId:t,messageId:ee.id,senderId:ee.senderId}},r=Array.from(ec);await Promise.all(r.map(async t=>{el.trim()&&await C.chatAPI.sendMessage(t,{content:el.trim()}),await C.chatAPI.sendMessage(t,{content:ee.content,type:ee.type,replyToId:e})})),ew({variant:"success",title:"Message forwarded",description:`Forwarded to ${r.length} chat${r.length>1?"s":""}.`}),et(null)}catch(e){ew({variant:"destructive",title:"Forward failed",description:"Unable to forward the message. Please try again."})}};return f?(0,d.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Loading chat..."})]})}):(0,d.jsx)("div",{className:"flex h-screen bg-white dark:bg-gray-900",children:(0,d.jsxs)("div",{className:"flex flex-col w-full",children:[(0,d.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("button",{onClick:()=>eb.push("/"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,d.jsx)(p,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center",children:eE()?(0,d.jsx)("img",{src:eE(),alt:"Avatar",className:"w-10 h-10 rounded-full"}):(0,d.jsx)("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:eN().charAt(0)})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:eN()}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(()=>{if(!s||"PRIVATE"!==s.type)return ep?"Online":"Connecting...";let e=s.participants.find(e=>e.user.id!==ef?.id);return e?V[e.user.id]||"OFFLINE":ep?"Online":"Connecting..."})(),M.length>0&&(0,d.jsxs)("span",{className:"text-green-600",children:[" â€¢ ",M.map(e=>e.username).join(", ")," typing..."]})]})]})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,d.jsx)(y.Phone,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,d.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,d.jsx)(x,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,d.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,d.jsx)(v,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]})}),(0,d.jsxs)("main",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[0===n.length?(0,d.jsx)("div",{className:"text-center py-12",children:(0,d.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Start the conversation by sending a message!"})}):n.map(e=>{let r,n=e.senderId===ef?.id;return(0,d.jsxs)("div",{id:`message-${e.id}`,className:`flex ${n?"justify-end":"justify-start"} gap-2 group`,children:[!n&&(0,d.jsx)("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center shrink-0",children:(0,d.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:e.sender.displayName.charAt(0)})}),(0,d.jsxs)("div",{className:`max-w-xs lg:max-w-md ${n?"order-1":""} relative`,children:[!n&&(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 px-3",children:e.sender.displayName}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsxs)("div",{onContextMenu:t=>{t.preventDefault(),Y(e.id)},onTouchStart:()=>{var t;return t=e.id,void(X.current&&window.clearTimeout(X.current),X.current=window.setTimeout(()=>{Y(t)},450))},onTouchEnd:ej,onTouchMove:ej,onTouchCancel:ej,className:`rounded-2xl px-4 py-2 ${n?"bg-blue-500 text-white dark:bg-blue-500 rounded-br-sm":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-sm"} ${Z===e.id?"bg-yellow-200/40 dark:bg-yellow-200/20":""}`,children:["FILE"===e.type||e.content.startsWith("ðŸ“Ž")?(e=>{if(!("FILE"===e.type||e.content.startsWith("ðŸ“Ž")))return null;let t=e.content.replace("ðŸ“Ž ",""),r=e.metadata?JSON.parse(e.metadata).url:null;return(0,d.jsxs)("div",{className:"flex items-center gap-2 p-3 border border-gray-200 dark:border-gray-600 rounded-lg",children:[(0,d.jsx)(w,{className:"w-6 h-6 text-gray-400"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t}),(0,d.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Shared file"})]}),r&&(0,d.jsx)("button",{className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:(0,d.jsx)(b,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})})(e):(0,d.jsxs)(d.Fragment,{children:[e.replyTo&&(0,d.jsxs)("button",{type:"button",onClick:()=>eD(e.replyTo.id),className:`mb-2 rounded-lg border px-2 py-1 text-xs ${n?"border-white/30 bg-white/10 text-white/90":"border-gray-200 bg-white text-gray-700 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-200"}`,children:[(0,d.jsxs)("p",{className:"font-medium",children:["Replying to ",e.replyTo.sender.displayName]}),(0,d.jsx)("p",{className:"truncate opacity-80",children:e.replyTo.content})]}),(r=eI(e.metadata),r?.forwardedFrom?(0,d.jsx)("p",{className:`mb-1 text-[11px] uppercase tracking-wide ${n?"text-white/70":"text-gray-500 dark:text-gray-300"}`,children:"Forwarded"}):null),(0,d.jsxs)("p",{className:"text-sm whitespace-pre-wrap",children:[e.content,e.isEdited&&(0,d.jsx)("span",{className:"text-xs opacity-70 ml-2",children:"(edited)"})]})]}),(0,d.jsx)("div",{className:"flex items-center justify-between mt-1",children:(0,d.jsx)("p",{className:`text-xs ${n?"text-green-100":"text-gray-500 dark:text-gray-400"}`,children:(0,aK.default)(e.createdAt).fromNow()})})]}),(0,d.jsx)("div",{className:`absolute -top-3 ${n?"-left-3":"-right-3"} z-10`,children:(0,d.jsx)(aa,{messageId:e.id,chatId:t,content:e.content,isOwn:n,isEdited:e.isEdited,createdAt:e.createdAt,onEdit:eS,onDelete:eP,onReply:eA,onForward:eF,align:n?"start":"end",side:n?"left":"right",open:q===e.id,onOpenChange:t=>Y(t?e.id:null)})})]}),(0,d.jsx)(I,{messageId:e.id,reactions:e.reactions||[],onAddReaction:eR,onRemoveReaction:eC})]})]},e.id)}),(0,d.jsx)("div",{ref:G})]}),(0,d.jsxs)("footer",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",children:[H&&(0,d.jsxs)("div",{className:"mb-3 flex items-start justify-between gap-3 rounded-lg border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-700 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-200",children:[(0,d.jsxs)("div",{className:"min-w-0",children:[(0,d.jsxs)("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:["Replying to ",H.sender.displayName]}),(0,d.jsx)("button",{type:"button",onClick:()=>eD(H.id),className:"truncate text-left text-gray-700 hover:text-gray-900 dark:text-gray-200 dark:hover:text-white",children:H.content})]}),(0,d.jsx)("button",{type:"button",onClick:()=>z(null),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200","aria-label":"Cancel reply",children:"âœ•"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("button",{onClick:()=>T(!0),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,d.jsx)(g,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,d.jsxs)("div",{className:"flex-1 relative",children:[(0,d.jsx)(N.Input,{value:o,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ek())},onFocus:()=>{ef&&ep&&ex(t,ef.id,ef.username)},onBlur:()=>{ef&&ep&&ev(t,ef.id)},placeholder:"Type a message...",className:"pr-12 rounded-full"}),(0,d.jsx)("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,d.jsx)(h,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]}),(0,d.jsx)(k.Button,{onClick:ek,disabled:!o.trim()||!ep,className:"rounded-full w-10 h-10 p-0 bg-blue-500 text-white hover:bg-blue-600 disabled:bg-blue-300",children:(0,d.jsx)(m,{className:"w-5 h-5"})})]}),D&&(0,d.jsx)(P,{onFileUploaded:e=>{let r=`ðŸ“Ž ${e.filename}`;ep&&ey(t,r,"FILE")},onClose:()=>T(!1)})]}),(0,d.jsx)(aW,{isOpen:!!F,messageId:F?.id||"",initialContent:F?.content||"",isLoading:O,onClose:()=>L(null),onSave:eM}),(0,d.jsx)(ac,{open:!!ee,onOpenChange:e=>!e&&et(null),children:(0,d.jsxs)(a_,{className:"sm:max-w-lg",children:[(0,d.jsx)(aH,{children:(0,d.jsx)(aB,{children:"Forward message"})}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(N.Input,{placeholder:"Add a note (optional)...",value:el,onChange:e=>ed(e.target.value)}),(0,d.jsx)(N.Input,{placeholder:"Search chats...",value:ea,onChange:e=>eo(e.target.value)}),ei&&(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Loading chats..."}),!ei&&(0,d.jsxs)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:[er.filter(e=>e.id!==t).filter(e=>eT(e).toLowerCase().includes(ea.trim().toLowerCase())).map(e=>{let t=eT(e),r=(e=>{if(e.avatar)return e.avatar;if("PRIVATE"===e.type){let t=e.participants.find(e=>e.user.id!==ef?.id);return t?.user.avatar}return null})(e),n=ec.has(e.id);return(0,d.jsxs)("button",{onClick:()=>{var t;return t=e.id,void eu(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},className:`w-full flex items-center gap-3 rounded-lg border p-3 text-left transition-colors ${n?"border-blue-500 bg-blue-50 dark:border-blue-400 dark:bg-blue-900/30":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[(0,d.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center overflow-hidden",children:r?(0,d.jsx)("img",{src:r,alt:"",className:"w-full h-full object-cover"}):(0,d.jsx)("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-300",children:t.charAt(0).toUpperCase()})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t}),"GROUP"===e.type&&(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:[e.participants.length," members"]})]}),n&&(0,d.jsx)("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-300",children:"Selected"})]},e.id)}),!ei&&0===er.filter(e=>e.id!==t).length&&(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"No chats available."})]}),(0,d.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,d.jsxs)("p",{className:"text-xs text-gray-500",children:[ec.size," chat",1===ec.size?"":"s"," selected"]}),(0,d.jsx)(k.Button,{onClick:eL,disabled:0===ec.size,children:"Forward"})]})]})]})})]})})}aK.default.extend(aV.default),e.s(["default",()=>aU],25629)}]);