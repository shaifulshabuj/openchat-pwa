(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39798,e=>{"use strict";let t,a;var s,r,i,l,n,o=e.i(3289),d=e.i(41263),c=e.i(47596),h=e.i(50663),u=e.i(33804);let m=(0,u.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),g=(0,u.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var x=e.i(93441);let f=(0,u.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),y=(0,u.default)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),p=(0,u.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var N=e.i(85349),v=e.i(5343),b=e.i(85902),j=e.i(94108);e.i(19256);let w=e=>`/chat?chatId=${encodeURIComponent(e)}`;var k=e.i(51052),E=e.i(85458),C=e.i(12437);function M(){let[e,t]=(0,d.useState)([]),[a,s]=(0,d.useState)(!0),{user:r}=(0,N.useAuthStore)(),{toast:i}=(0,k.useToast)(),l=(0,c.useRouter)();return((0,d.useEffect)(()=>{let e=async()=>{try{let e=await j.chatAPI.getChats();e.success&&t(e.data)}catch(e){console.error("Error loading chats:",e),i({variant:"destructive",title:"Error",description:"Failed to load chats. Please refresh the page."})}finally{s(!1)}};r&&e()},[r]),a)?(0,o.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Loading chats..."})]})}):0===e.length?(0,o.jsx)("div",{className:"flex items-center justify-center p-8 h-full",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-4 mx-auto",children:(0,o.jsx)(h.MessageSquare,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No conversations yet"}),(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-sm mx-auto",children:"Start a new conversation by tapping the + button below"})]})}):(0,o.jsx)("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(e=>{let t=(e=>{if("GROUP"===e.type||"CHANNEL"===e.type)return e.name||"Group Chat";let t=e.participants.find(e=>e.user.id!==r?.id);return t?.user.displayName||"Private Chat"})(e),a=(e=>{if(e.avatar)return e.avatar;if("PRIVATE"===e.type){let t=e.participants.find(e=>e.user.id!==r?.id);return t?.user.avatar}return null})(e),s=(e=>{if(!e.lastMessage)return"No messages yet";let t=e.lastMessage.content;return t.length>50?t.substring(0,50)+"...":t})(e),i=(e=>{if(!e.lastMessage)return 0;let t=localStorage.getItem(`chat_read_${e.id}`);if(t&&new Date(t).getTime()>=new Date(e.lastMessage.createdAt).getTime())return 0;return e.unreadCount})(e),n=e.lastMessage?(0,E.default)(e.lastMessage.createdAt).fromNow():(0,E.default)(e.createdAt).fromNow();return(0,o.jsx)("button",{onClick:()=>l.push(w(e.id)),className:"w-full p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors text-left",children:(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center flex-shrink-0",children:a?(0,o.jsx)("img",{src:a,alt:"Avatar",className:"w-12 h-12 rounded-full object-cover"}):(0,o.jsx)("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:t.charAt(0).toUpperCase()})}),i>0&&(0,o.jsx)("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i>9?"9+":i})]}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t}),(0,o.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0 ml-2",children:n})]}),(0,o.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:[e.lastMessage?.senderId===r?.id&&"You: ",s]}),"GROUP"===e.type&&(0,o.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[e.participants.length," participants"]})]})]})},e.id)})})}E.default.extend(C.default);let R=(0,u.default)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),S=(0,u.default)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function A(){let[e,t]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{t(document.documentElement.classList.contains("dark"))},[]),(0,d.useEffect)(()=>{let e=localStorage.getItem("darkMode");"enabled"===e?(document.documentElement.classList.add("dark"),t(!0)):"disabled"===e?(document.documentElement.classList.remove("dark"),t(!1)):window.matchMedia("(prefers-color-scheme: dark)").matches&&(document.documentElement.classList.add("dark"),t(!0))},[]),(0,o.jsx)("button",{onClick:()=>{let a=!e;t(a),a?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","enabled")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","disabled"))},className:"p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors","aria-label":"Toggle dark mode",children:e?(0,o.jsx)(S,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"}):(0,o.jsx)(R,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})})}let P=(0,u.default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var I=e.i(10012);let L=({onScan:e})=>{let[t,a]=(0,d.useState)("");return(0,o.jsxs)("div",{className:"rounded-lg border border-dashed border-gray-200 dark:border-gray-700 p-4",children:[(0,o.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Scan QR code (paste OpenChat code, user ID, or username)"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(I.Input,{placeholder:"Paste code or username...",value:t,onChange:e=>a(e.target.value)}),(0,o.jsx)(b.Button,{size:"sm",onClick:()=>{t.trim()&&(e(t.trim()),a(""))},children:"Scan"})]})]})};var z=Object.defineProperty,U=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable,_=(e,t,a)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,F=(e,t)=>{for(var a in t||(t={}))B.call(t,a)&&_(e,a,t[a]);if(U)for(var a of U(t))O.call(t,a)&&_(e,a,t[a]);return e},T=(e,t)=>{var a={};for(var s in e)B.call(e,s)&&0>t.indexOf(s)&&(a[s]=e[s]);if(null!=e&&U)for(var s of U(e))0>t.indexOf(s)&&O.call(e,s)&&(a[s]=e[s]);return a};(e=>{let t=class{constructor(e,a,s,i){if(this.version=e,this.errorCorrectionLevel=a,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version value out of range");if(i<-1||i>7)throw RangeError("Mask value out of range");this.size=4*e+17;let l=[];for(let e=0;e<this.size;e++)l.push(!1);for(let e=0;e<this.size;e++)this.modules.push(l.slice()),this.isFunction.push(l.slice());this.drawFunctionPatterns();const n=this.addEccAndInterleave(s);if(this.drawCodewords(n),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const a=this.getPenaltyScore();a<e&&(i=t,e=a),this.applyMask(t)}}r(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(a,s){let r=e.QrSegment.makeSegments(a);return t.encodeSegments(r,s)}static encodeBinary(a,s){let r=e.QrSegment.makeBytes(a);return t.encodeSegments([r],s)}static encodeSegments(e,s,i=1,n=40,o=-1,d=!0){let c,h;if(!(t.MIN_VERSION<=i&&i<=n&&n<=t.MAX_VERSION)||o<-1||o>7)throw RangeError("Invalid value");for(c=i;;c++){let a=8*t.getNumDataCodewords(c,s),r=l.getTotalBits(e,c);if(r<=a){h=r;break}if(c>=n)throw RangeError("Data too long")}for(let e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&h<=8*t.getNumDataCodewords(c,e)&&(s=e);let u=[];for(let t of e)for(let e of(a(t.mode.modeBits,4,u),a(t.numChars,t.mode.numCharCountBits(c),u),t.getData()))u.push(e);r(u.length==h);let m=8*t.getNumDataCodewords(c,s);r(u.length<=m),a(0,Math.min(4,m-u.length),u),a(0,(8-u.length%8)%8,u),r(u.length%8==0);for(let e=236;u.length<m;e^=253)a(e,8,u);let g=[];for(;8*g.length<u.length;)g.push(0);return u.forEach((e,t)=>g[t>>>3]|=e<<7-(7&t)),new t(c,s,g,o)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);let e=this.getAlignmentPatternPositions(),t=e.length;for(let a=0;a<t;a++)for(let s=0;s<t;s++)(0!=a||0!=s)&&(0!=a||s!=t-1)&&(a!=t-1||0!=s)&&this.drawAlignmentPattern(e[a],e[s]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){let t=this.errorCorrectionLevel.formatBits<<3|e,a=t;for(let e=0;e<10;e++)a=a<<1^(a>>>9)*1335;let i=(t<<10|a)^21522;r(i>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,s(i,e));this.setFunctionModule(8,7,s(i,6)),this.setFunctionModule(8,8,s(i,7)),this.setFunctionModule(7,8,s(i,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,s(i,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,s(i,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,s(i,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^(e>>>11)*7973;let t=this.version<<12|e;r(t>>>18==0);for(let e=0;e<18;e++){let a=s(t,e),r=this.size-11+e%3,i=Math.floor(e/3);this.setFunctionModule(r,i,a),this.setFunctionModule(i,r,a)}}drawFinderPattern(e,t){for(let a=-4;a<=4;a++)for(let s=-4;s<=4;s++){let r=Math.max(Math.abs(s),Math.abs(a)),i=e+s,l=t+a;0<=i&&i<this.size&&0<=l&&l<this.size&&this.setFunctionModule(i,l,2!=r&&4!=r)}}drawAlignmentPattern(e,t){for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)this.setFunctionModule(e+s,t+a,1!=Math.max(Math.abs(s),Math.abs(a)))}setFunctionModule(e,t,a){this.modules[t][e]=a,this.isFunction[t][e]=!0}addEccAndInterleave(e){let a=this.version,s=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(a,s))throw RangeError("Invalid argument");let i=t.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][a],l=t.ECC_CODEWORDS_PER_BLOCK[s.ordinal][a],n=Math.floor(t.getNumRawDataModules(a)/8),o=i-n%i,d=Math.floor(n/i),c=[],h=t.reedSolomonComputeDivisor(l);for(let a=0,s=0;a<i;a++){let r=e.slice(s,s+d-l+(a<o?0:1));s+=r.length;let i=t.reedSolomonComputeRemainder(r,h);a<o&&r.push(0),c.push(r.concat(i))}let u=[];for(let e=0;e<c[0].length;e++)c.forEach((t,a)=>{(e!=d-l||a>=o)&&u.push(t[e])});return r(u.length==n),u}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw RangeError("Invalid argument");let a=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let r=0;r<this.size;r++)for(let i=0;i<2;i++){let l=t-i,n=(t+1&2)==0?this.size-1-r:r;!this.isFunction[n][l]&&a<8*e.length&&(this.modules[n][l]=s(e[a>>>3],7-(7&a)),a++)}}r(a==8*e.length)}applyMask(e){if(e<0||e>7)throw RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++){let s;switch(e){case 0:s=(a+t)%2==0;break;case 1:s=t%2==0;break;case 2:s=a%3==0;break;case 3:s=(a+t)%3==0;break;case 4:s=(Math.floor(a/3)+Math.floor(t/2))%2==0;break;case 5:s=a*t%2+a*t%3==0;break;case 6:s=(a*t%2+a*t%3)%2==0;break;case 7:s=((a+t)%2+a*t%3)%2==0;break;default:throw Error("Unreachable")}!this.isFunction[t][a]&&s&&(this.modules[t][a]=!this.modules[t][a])}}getPenaltyScore(){let e=0;for(let a=0;a<this.size;a++){let s=!1,r=0,i=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[a][l]==s?5==++r?e+=t.PENALTY_N1:r>5&&e++:(this.finderPenaltyAddHistory(r,i),s||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),s=this.modules[a][l],r=1);e+=this.finderPenaltyTerminateAndCount(s,r,i)*t.PENALTY_N3}for(let a=0;a<this.size;a++){let s=!1,r=0,i=[0,0,0,0,0,0,0];for(let l=0;l<this.size;l++)this.modules[l][a]==s?5==++r?e+=t.PENALTY_N1:r>5&&e++:(this.finderPenaltyAddHistory(r,i),s||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),s=this.modules[l][a],r=1);e+=this.finderPenaltyTerminateAndCount(s,r,i)*t.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let s=0;s<this.size-1;s++){let r=this.modules[a][s];r==this.modules[a][s+1]&&r==this.modules[a+1][s]&&r==this.modules[a+1][s+1]&&(e+=t.PENALTY_N2)}let a=0;for(let e of this.modules)a=e.reduce((e,t)=>e+ +!!t,a);let s=this.size*this.size,i=Math.ceil(Math.abs(20*a-10*s)/s)-1;return r(0<=i&&i<=9),r(0<=(e+=i*t.PENALTY_N4)&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{let e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2)),a=[6];for(let s=this.size-7;a.length<e;s-=t)a.splice(1,0,s);return a}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw RangeError("Version number out of range");let a=(16*e+128)*e+64;if(e>=2){let t=Math.floor(e/7)+2;a-=(25*t-10)*t-55,e>=7&&(a-=36)}return r(208<=a&&a<=29648),a}static getNumDataCodewords(e,a){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[a.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw RangeError("Degree out of range");let a=[];for(let t=0;t<e-1;t++)a.push(0);a.push(1);let s=1;for(let r=0;r<e;r++){for(let e=0;e<a.length;e++)a[e]=t.reedSolomonMultiply(a[e],s),e+1<a.length&&(a[e]^=a[e+1]);s=t.reedSolomonMultiply(s,2)}return a}static reedSolomonComputeRemainder(e,a){let s=a.map(e=>0);for(let r of e){let e=r^s.shift();s.push(0),a.forEach((a,r)=>s[r]^=t.reedSolomonMultiply(a,e))}return s}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw RangeError("Byte out of range");let a=0;for(let s=7;s>=0;s--)a=a<<1^(a>>>7)*285^(t>>>s&1)*e;return r(a>>>8==0),a}finderPenaltyCountPatterns(e){let t=e[1];r(t<=3*this.size);let a=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(a&&e[0]>=4*t&&e[6]>=t?1:0)+(a&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,a){return e&&(this.finderPenaltyAddHistory(t,a),t=0),t+=this.size,this.finderPenaltyAddHistory(t,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};function a(e,t,a){if(t<0||t>31||e>>>t!=0)throw RangeError("Value out of range");for(let s=t-1;s>=0;s--)a.push(e>>>s&1)}function s(e,t){return(e>>>t&1)!=0}function r(e){if(!e)throw Error("Assertion error")}t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;let i=class{constructor(e,t,a){if(this.mode=e,this.numChars=t,this.bitData=a,t<0)throw RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(e){let t=[];for(let s of e)a(s,8,t);return new i(i.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!i.isNumeric(e))throw RangeError("String contains non-numeric characters");let t=[];for(let s=0;s<e.length;){let r=Math.min(e.length-s,3);a(parseInt(e.substr(s,r),10),3*r+1,t),s+=r}return new i(i.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){let t;if(!i.isAlphanumeric(e))throw RangeError("String contains unencodable characters in alphanumeric mode");let s=[];for(t=0;t+2<=e.length;t+=2){let r=45*i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));a(r+=i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),11,s)}return t<e.length&&a(i.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,s),new i(i.Mode.ALPHANUMERIC,e.length,s)}static makeSegments(e){return""==e?[]:i.isNumeric(e)?[i.makeNumeric(e)]:i.isAlphanumeric(e)?[i.makeAlphanumeric(e)]:[i.makeBytes(i.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw RangeError("ECI assignment value out of range");if(e<128)a(e,8,t);else if(e<16384)a(2,2,t),a(e,14,t);else if(e<1e6)a(6,3,t),a(e,21,t);else throw RangeError("ECI assignment value out of range");return new i(i.Mode.ECI,0,t)}static isNumeric(e){return i.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return i.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let a=0;for(let s of e){let e=s.mode.numCharCountBits(t);if(s.numChars>=1<<e)return 1/0;a+=4+e+s.bitData.length}return a}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let a=0;a<e.length;a++)"%"!=e.charAt(a)?t.push(e.charCodeAt(a)):(t.push(parseInt(e.substr(a+1,2),16)),a+=2);return t}},l=i;l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=l})(n||(n={})),r=(s=n||(n={})).QrCode||(s.QrCode={}),(t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}}).LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),r.Ecc=t,l=(i=n||(n={})).QrSegment||(i.QrSegment={}),(a=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}).NUMERIC=new a(1,[10,12,14]),a.ALPHANUMERIC=new a(2,[9,11,13]),a.BYTE=new a(4,[8,16,16]),a.KANJI=new a(8,[8,10,12]),a.ECI=new a(7,[0,0,0]),l.Mode=a;var D=n,H={L:D.QrCode.Ecc.LOW,M:D.QrCode.Ecc.MEDIUM,Q:D.QrCode.Ecc.QUARTILE,H:D.QrCode.Ecc.HIGH},$="#FFFFFF",Q="#000000";function q(e,t=0){let a=[];return e.forEach(function(e,s){let r=null;e.forEach(function(i,l){if(!i&&null!==r){a.push(`M${r+t} ${s+t}h${l-r}v1H${r+t}z`),r=null;return}if(l===e.length-1){if(!i)return;null===r?a.push(`M${l+t},${s+t} h1v1H${l+t}z`):a.push(`M${r+t},${s+t} h${l+1-r}v1H${r+t}z`);return}i&&null===r&&(r=l)})}),a.join("")}function V(e,t){return e.slice().map((e,a)=>a<t.y||a>=t.y+t.h?e:e.map((e,a)=>(a<t.x||a>=t.x+t.w)&&e))}function Y(e,t,a,s){if(null==s)return null;let r=e.length+4*!!a*2,i=Math.floor(.1*t),l=r/t,n=(s.width||i)*l,o=(s.height||i)*l,d=null==s.x?e.length/2-n/2:s.x*l,c=null==s.y?e.length/2-o/2:s.y*l,h=null;if(s.excavate){let e=Math.floor(d),t=Math.floor(c),a=Math.ceil(n+d-e),s=Math.ceil(o+c-t);h={x:e,y:t,w:a,h:s}}return{x:d,y:c,h:o,w:n,excavation:h}}var G=function(){try{new Path2D().addPath(new Path2D)}catch(e){return!1}return!0}();function W(e){let{value:t,size:a=128,level:s="L",bgColor:r=$,fgColor:i=Q,includeMargin:l=!1,style:n,imageSettings:o}=e,c=T(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),h=null==o?void 0:o.src,u=d.default.useRef(null),m=d.default.useRef(null),[g,x]=d.default.useState(!1);d.default.useEffect(()=>{if(null!=u.current){let e=u.current,n=e.getContext("2d");if(!n)return;let d=D.QrCode.encodeText(t,H[s]).getModules(),c=4*!!l,h=d.length+2*c,g=Y(d,a,l,o),x=m.current,f=null!=g&&null!==x&&x.complete&&0!==x.naturalHeight&&0!==x.naturalWidth;f&&null!=g.excavation&&(d=V(d,g.excavation));let y=window.devicePixelRatio||1;e.height=e.width=a*y;let p=a/h*y;n.scale(p,p),n.fillStyle=r,n.fillRect(0,0,h,h),n.fillStyle=i,G?n.fill(new Path2D(q(d,c))):d.forEach(function(e,t){e.forEach(function(e,a){e&&n.fillRect(a+c,t+c,1,1)})}),f&&n.drawImage(x,g.x+c,g.y+c,g.w,g.h)}}),d.default.useEffect(()=>{x(!1)},[h]);let f=F({height:a,width:a},n),y=null;return null!=h&&(y=d.default.createElement("img",{src:h,key:h,style:{display:"none"},onLoad:()=>{x(!0)},ref:m})),d.default.createElement(d.default.Fragment,null,d.default.createElement("canvas",F({style:f,height:a,width:a,ref:u},c)),y)}function K(e){let{value:t,size:a=128,level:s="L",bgColor:r=$,fgColor:i=Q,includeMargin:l=!1,imageSettings:n}=e,o=T(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]),c=D.QrCode.encodeText(t,H[s]).getModules(),h=4*!!l,u=c.length+2*h,m=Y(c,a,l,n),g=null;null!=n&&null!=m&&(null!=m.excavation&&(c=V(c,m.excavation)),g=d.default.createElement("image",{xlinkHref:n.src,height:m.h,width:m.w,x:m.x+h,y:m.y+h,preserveAspectRatio:"none"}));let x=q(c,h);return d.default.createElement("svg",F({height:a,width:a,viewBox:`0 0 ${u} ${u}`},o),d.default.createElement("path",{fill:r,d:`M0,0 h${u}v${u}H0z`,shapeRendering:"crispEdges"}),d.default.createElement("path",{fill:i,d:x,shapeRendering:"crispEdges"}),g)}var X=e=>{let{renderAs:t}=e,a=T(e,["renderAs"]);return"svg"===t?d.default.createElement(K,F({},a)):d.default.createElement(W,F({},a))};let J=({userId:e,username:t,displayName:a})=>{let{toast:s}=(0,k.useToast)();if(!e)return null;let r=`openchat:user:${e}`,i=async()=>{try{await navigator.clipboard.writeText(r),s({variant:"success",title:"Code copied",description:"Share your QR code with friends to add you."})}catch(e){s({variant:"destructive",title:"Copy failed",description:"Unable to copy QR code. Please try again."})}};return(0,o.jsxs)("div",{className:"rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4 space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Your QR code"}),(0,o.jsx)("p",{className:"text-xs text-gray-500",children:a||t?`${a||""} @${t||""}`:"Share to add you"})]}),(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("div",{className:"rounded-md border border-gray-200 dark:border-gray-700 bg-white p-2",children:(0,o.jsx)(X,{value:r,size:120,bgColor:"#ffffff",fgColor:"#111827"})}),(0,o.jsxs)("div",{className:"space-y-2 text-xs text-gray-600 dark:text-gray-400",children:[(0,o.jsx)("p",{children:"Let others scan this code to send you a contact request."}),(0,o.jsx)(b.Button,{size:"sm",variant:"outline",onClick:i,children:"Copy QR code"})]})]})]})};var Z=e.i(43963);let ee=async e=>(await j.api.get(`/api/users/search?q=${encodeURIComponent(e)}`)).data,et=async()=>(await j.api.get("/api/contacts")).data,ea=async()=>(await j.api.get("/api/contacts/requests")).data,es=async e=>(await j.api.post("/api/contacts/request",{userId:e})).data,er=async(e,t)=>(await j.api.post(`/api/contacts/requests/${e}/respond`,{status:t})).data,ei=async e=>(await j.api.post(`/api/contacts/${e}/block`)).data,el=async e=>(await j.api.post(`/api/contacts/${e}/unblock`)).data,en=(0,Z.create)(e=>({contacts:[],requests:[],isLoading:!1,error:null,loadContacts:async()=>{e({isLoading:!0,error:null});try{let t=await et();e({contacts:t.data,isLoading:!1})}catch(t){e({error:t?.message||"Failed to load contacts",isLoading:!1})}},loadRequests:async()=>{e({isLoading:!0,error:null});try{let t=await ea();e({requests:t.data,isLoading:!1})}catch(t){e({error:t?.message||"Failed to load requests",isLoading:!1})}},refreshAll:async()=>{e({isLoading:!0,error:null});try{let[t,a]=await Promise.all([et(),ea()]);e({contacts:t.data,requests:a.data,isLoading:!1})}catch(t){e({error:t?.message||"Failed to refresh contacts",isLoading:!1})}},updateStatus:(t,a)=>{e(e=>({contacts:e.contacts.map(e=>e.user.id===t?{...e,user:{...e.user,status:a}}:e),requests:e.requests.map(e=>({...e,fromUser:e.fromUser?.id===t?{...e.fromUser,status:a}:e.fromUser,toUser:e.toUser?.id===t?{...e.toUser,status:a}:e.toUser}))}))}})),eo=({onClose:e})=>{let t=(0,c.useRouter)(),{user:a}=(0,N.useAuthStore)(),{contacts:s,requests:r,isLoading:i,error:l,refreshAll:n,updateStatus:h}=en(),{on:u,off:g}=(0,v.useSocket)(),[x,f]=(0,d.useState)(""),[y,p]=(0,d.useState)([]),[j,k]=(0,d.useState)(!1),[E,C]=(0,d.useState)(null);(0,d.useEffect)(()=>{n()},[n]),(0,d.useEffect)(()=>{let e=({userId:e,status:t})=>{h(e,t)};return u("user-status-changed",e),()=>{g("user-status-changed",e)}},[u,g,h]);let M=(0,d.useMemo)(()=>r.filter(e=>"incoming"===e.direction),[r]),R=(0,d.useMemo)(()=>r.filter(e=>"outgoing"===e.direction),[r]),S=async e=>{let t=("string"==typeof e?e:x).trim();if(t){k(!0),C(null);try{let e=(await ee(t)).data.filter(e=>e.id!==a?.id);p(e)}catch(e){C(e?.message||"Failed to search users")}finally{k(!1)}}},A=async e=>{await es(e),await n()},z=async(e,t)=>{await er(e,t),await n()},U=async e=>{await ei(e),await n()},B=async e=>{await el(e),await n()},O=async e=>{let t=e.trim();if(t){if(t.startsWith("openchat:user:")){let e=t.replace("openchat:user:","");if(e)return void await A(e)}f(t),await S(t)}};return(0,o.jsxs)("div",{className:"h-full overflow-y-auto p-4 space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[(0,o.jsx)(m,{className:"w-5 h-5"}),"Contacts"]}),(0,o.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Find people by username or email and start a conversation."})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(I.Input,{placeholder:"Search by username or email",value:x,onChange:e=>f(e.target.value)}),(0,o.jsx)(b.Button,{size:"sm",onClick:S,disabled:j,children:"Search"})]}),E&&(0,o.jsx)("p",{className:"text-sm text-red-500",children:E}),y.length>0&&(0,o.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.displayName}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["@",e.username]})]}),(0,o.jsxs)(b.Button,{size:"sm",onClick:()=>A(e.id),children:[(0,o.jsx)(P,{className:"w-4 h-4 mr-1"}),"Add"]})]},e.id))})]}),(0,o.jsx)(J,{userId:a?.id,username:a?.username,displayName:a?.displayName}),(0,o.jsx)(L,{onScan:O}),(0,o.jsxs)("section",{className:"space-y-3",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:"Requests"}),0===M.length&&0===R.length&&(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"No pending requests."}),M.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.fromUser?.displayName||"Unknown user"}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["@",e.fromUser?.username]})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(b.Button,{size:"sm",variant:"outline",onClick:()=>z(e.id,"declined"),children:"Decline"}),(0,o.jsx)(b.Button,{size:"sm",onClick:()=>z(e.id,"accepted"),children:"Accept"})]})]},e.id)),R.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.toUser?.displayName||"Unknown user"}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["@",e.toUser?.username]})]}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:"Pending"})]},e.id))]}),(0,o.jsxs)("section",{className:"space-y-3",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide",children:"Your contacts"}),i&&(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Loading contacts..."}),l&&(0,o.jsx)("p",{className:"text-sm text-red-500",children:l}),!i&&0===s.length&&(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"No contacts yet. Start by adding someone."}),s.map(a=>(0,o.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-gray-800 rounded-lg p-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.user.displayName}),(0,o.jsxs)("p",{className:"text-xs text-gray-500",children:["@",a.user.username]}),(0,o.jsxs)("p",{className:"text-xs text-gray-400",children:["Status: ",a.user.status]}),a.isBlocked&&(0,o.jsx)("p",{className:"text-xs font-medium text-red-500",children:"Blocked"})]}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)(b.Button,{size:"sm",variant:"outline",onClick:()=>{var s;return s=a.chatId,void(t.push(w(s)),e?.())},disabled:a.isBlocked,children:"Start"}),a.isBlocked?(0,o.jsx)(b.Button,{size:"sm",variant:"outline",onClick:()=>B(a.user.id),children:"Unblock"}):(0,o.jsx)(b.Button,{size:"sm",variant:"ghost",onClick:()=>U(a.user.id),children:"Block"})]})]},a.chatId))]})]})};function ed(){let[e,t]=(0,d.useState)("chats"),[a,s]=(0,d.useState)(""),[r,i]=(0,d.useState)(!1),[l,n]=(0,d.useState)(!1),{user:u,isAuthenticated:j,isLoading:w,logout:k,checkAuth:E}=(0,N.useAuthStore)(),{isConnected:C,joinChat:R,sendMessage:S}=(0,v.useSocket)(),P=(0,c.useRouter)();(0,d.useEffect)(()=>{i(!0)},[]),(0,d.useEffect)(()=>{r&&E()},[E,r]),(0,d.useEffect)(()=>{!r||w||j||null!==u||P.push("/auth/login")},[r,w,j,u,P]);let I=async()=>{await k(),P.push("/auth/login")};return r&&!w&&(j||null!==u)?(0,o.jsxs)("div",{className:"flex h-screen bg-white dark:bg-gray-900",children:[(0,o.jsxs)("div",{className:"flex flex-col w-full",children:[(0,o.jsx)("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"OpenChat"}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:`w-2 h-2 rounded-full ${C?"bg-green-500":"bg-red-500"}`}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:C?"Connected":"Disconnected"})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,o.jsx)(f,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,o.jsx)(A,{}),(0,o.jsx)("button",{onClick:I,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:(0,o.jsx)(y,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]})}),u&&(0,o.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 px-4 py-2 border-b border-gray-200 dark:border-gray-700",children:(0,o.jsxs)("p",{className:"text-sm text-green-800 dark:text-green-200",children:["Welcome back, ",(0,o.jsx)("span",{className:"font-medium",children:u.displayName}),"!"]})}),(0,o.jsx)("nav",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,o.jsx)("div",{className:"flex",children:[{id:"chats",label:"Chats",icon:h.MessageSquare},{id:"contacts",label:"Contacts",icon:m},{id:"calls",label:"Calls",icon:x.Phone},{id:"settings",label:"Settings",icon:g}].map(a=>{let s=a.icon;return(0,o.jsxs)("button",{onClick:()=>t(a.id),className:`flex-1 flex flex-col items-center gap-1 py-3 px-2 border-b-2 transition-colors ${e===a.id?"border-green-500 text-green-600 dark:text-green-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[(0,o.jsx)(s,{className:"w-5 h-5"}),(0,o.jsx)("span",{className:"text-xs font-medium",children:a.label})]},a.id)})})}),(0,o.jsxs)("main",{className:"flex-1 overflow-hidden",children:["chats"===e&&(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[(0,o.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,o.jsx)(M,{})}),(0,o.jsx)("div",{className:"absolute bottom-6 right-6",children:(0,o.jsx)("button",{onClick:()=>n(!0),className:"w-14 h-14 bg-green-500 hover:bg-green-600 text-white rounded-full shadow-lg flex items-center justify-center transition-colors",children:(0,o.jsx)(p,{className:"w-6 h-6"})})})]}),"contacts"===e&&(0,o.jsx)(eo,{}),"calls"===e&&(0,o.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)(x.Phone,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Voice & Video Calls"}),(0,o.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"WebRTC integration planned for Phase 2"})]})}),"settings"===e&&(0,o.jsx)("div",{className:"h-full p-4",children:(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,o.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Account Settings"}),(0,o.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Profile management and preferences"}),(0,o.jsx)(b.Button,{onClick:I,variant:"outline",size:"sm",children:"Sign Out"})]}),(0,o.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:[(0,o.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Development Info"}),(0,o.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,o.jsx)("p",{children:"Frontend: React 19 + Next.js 16"}),(0,o.jsx)("p",{children:"Backend: Node.js + Fastify + Socket.io"}),(0,o.jsx)("p",{children:"Database: PostgreSQL + Prisma"}),(0,o.jsx)("p",{children:"Auth: JWT tokens + bcrypt"}),(0,o.jsx)("p",{children:"Real-time: Socket.io with Redis adapter"})]})]})]})})]})]}),l&&(0,o.jsx)("div",{className:"fixed inset-0 z-50 bg-black/40 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-4 py-3",children:[(0,o.jsx)("h2",{className:"text-base font-semibold text-gray-900 dark:text-white",children:"Start a conversation"}),(0,o.jsx)("button",{onClick:()=>n(!1),className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-200",children:"Close"})]}),(0,o.jsx)(eo,{onClose:()=>n(!1)})]})})]}):(0,o.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:r?"Loading...":"Initializing..."})]})})}e.s(["default",()=>ed],39798)}]);